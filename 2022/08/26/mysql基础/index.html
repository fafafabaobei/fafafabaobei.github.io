<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Mysql基础 | fafafabaobei</title><meta name="author" content="fafafa"><meta name="copyright" content="fafafa"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="SQL关系数据库概述数据模型数据库一共有三种模型：  层次模型 层次模型就是以“上下级”的层次关系来组织数据的一种方式，层次模型的数据结构看起来就像一颗树   网状模型 网状模型把每个数据节点和其他很多节点都连接起来，它的数据结构看起来就像很多城市之间的路网   关系模型 关系模型把数据看作是一个二维表格，任何数据都可以通过行号+列号来唯一确定，它的数据模型看起来就是一个Excel表    数据类">
<meta property="og:type" content="article">
<meta property="og:title" content="Mysql基础">
<meta property="og:url" content="https://fafafabaobei.github.io/2022/08/26/mysql%E5%9F%BA%E7%A1%80/index.html">
<meta property="og:site_name" content="fafafabaobei">
<meta property="og:description" content="SQL关系数据库概述数据模型数据库一共有三种模型：  层次模型 层次模型就是以“上下级”的层次关系来组织数据的一种方式，层次模型的数据结构看起来就像一颗树   网状模型 网状模型把每个数据节点和其他很多节点都连接起来，它的数据结构看起来就像很多城市之间的路网   关系模型 关系模型把数据看作是一个二维表格，任何数据都可以通过行号+列号来唯一确定，它的数据模型看起来就是一个Excel表    数据类">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://tse2-mm.cn.bing.net/th/id/OIP-C._CBgHuOEl_liF7Z8_H9yKAHaEo?w=262&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7">
<meta property="article:published_time" content="2022-08-26T11:07:47.000Z">
<meta property="article:modified_time" content="2022-08-26T11:07:47.000Z">
<meta property="article:author" content="fafafa">
<meta property="article:tag" content="MySQL">
<meta property="article:tag" content="数据库">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://tse2-mm.cn.bing.net/th/id/OIP-C._CBgHuOEl_liF7Z8_H9yKAHaEo?w=262&h=180&c=7&r=0&o=5&dpr=1.3&pid=1.7"><link rel="shortcut icon" href="/img/blog.png"><link rel="canonical" href="https://fafafabaobei.github.io/2022/08/26/mysql%E5%9F%BA%E7%A1%80/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><link rel="stylesheet" href="/css/index.css?v=4.14.0-b3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>(()=>{
      const saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
      
      window.btf = {
        saveToLocal: saveToLocal,
        getScript: (url, attr = {}) => new Promise((resolve, reject) => {
          const script = document.createElement('script')
          script.src = url
          script.async = true
          script.onerror = reject
          script.onload = script.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            script.onload = script.onreadystatechange = null
            resolve()
          }

          Object.keys(attr).forEach(key => {
            script.setAttribute(key, attr[key])
          })

          document.head.appendChild(script)
        }),

        getCSS: (url, id = false) => new Promise((resolve, reject) => {
          const link = document.createElement('link')
          link.rel = 'stylesheet'
          link.href = url
          if (id) link.id = id
          link.onerror = reject
          link.onload = link.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            link.onload = link.onreadystatechange = null
            resolve()
          }
          document.head.appendChild(link)
        }),

        addGlobalFn: (key, fn, name = false, parent = window) => {
          const pjaxEnable = false
          if (!pjaxEnable && key.startsWith('pjax')) return

          const globalFn = parent.globalFn || {}
          const keyObj = globalFn[key] || {}
    
          if (name && keyObj[name]) return
    
          name = name || Object.keys(keyObj).length
          keyObj[name] = fn
          globalFn[key] = keyObj
          parent.globalFn = globalFn
        }
      }
    
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode
      
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Mysql基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-08-26 19:07:47'
}</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    btf.addGlobalFn('pjaxSend', () => { preloader.initLoading() }, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', () => { preloader.endLoading() }, 'preloader_end')
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/fafafa.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">55</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">46</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://tse2-mm.cn.bing.net/th/id/OIP-C._CBgHuOEl_liF7Z8_H9yKAHaEo?w=262&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7')"><nav id="nav"><span id="blog-info"><a href="/" title="fafafabaobei"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/blog.png" alt="Logo"/><span class="site-name">fafafabaobei</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Mysql基础<a class="post-edit-link" href="null_posts/mysql基础.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-08-26T11:07:47.000Z" title="发表于 2022-08-26 19:07:47">2022-08-26</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-08-26T11:07:47.000Z" title="更新于 2022-08-26 19:07:47">2022-08-26</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/MySQL/">MySQL</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">10.4k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>34分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Mysql基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h2 id="SQL"><a href="#SQL" class="headerlink" title="SQL"></a>SQL</h2><h3 id="关系数据库概述"><a href="#关系数据库概述" class="headerlink" title="关系数据库概述"></a>关系数据库概述</h3><h4 id="数据模型"><a href="#数据模型" class="headerlink" title="数据模型"></a>数据模型</h4><p>数据库一共有三种模型：</p>
<ul>
<li><p>层次模型</p>
<p>层次模型就是以“上下级”的层次关系来组织数据的一种方式，层次模型的数据结构看起来就像一颗树</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2022/08/26/mysql%E5%9F%BA%E7%A1%80/%E5%B1%82%E6%AC%A1%E6%A8%A1%E5%9E%8B.png"></p>
</li>
<li><p>网状模型</p>
<p>网状模型把每个数据节点和其他很多节点都连接起来，它的数据结构看起来就像很多城市之间的路网</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2022/08/26/mysql%E5%9F%BA%E7%A1%80/%E7%BD%91%E7%8A%B6%E6%A8%A1%E5%9E%8B.png"></p>
</li>
<li><p>关系模型</p>
<p>关系模型把数据看作是一个二维表格，任何数据都可以通过行号+列号来唯一确定，它的数据模型看起来就是一个Excel表</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2022/08/26/mysql%E5%9F%BA%E7%A1%80/%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B.png" alt="image-20240725165200125"></p>
</li>
</ul>
<h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><p>对于一个关系表，除了定义每一列的名称外，还需要定义每一列的数据类型。关系数据库支持的标准数据类型包括数值、字符串、时间等</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>INT</td>
<td>整型</td>
<td>4字节整数类型，范围约+&#x2F;-21亿</td>
</tr>
<tr>
<td>BIGINT</td>
<td>长整型</td>
<td>8字节整数类型，范围约+&#x2F;-922亿亿</td>
</tr>
<tr>
<td>REAL</td>
<td>浮点型</td>
<td>4字节浮点数，范围约+&#x2F;-1038</td>
</tr>
<tr>
<td>DOUBLE</td>
<td>浮点型</td>
<td>8字节浮点数，范围约+&#x2F;-10308</td>
</tr>
<tr>
<td>DECIMAL(M,N)</td>
<td>高精度小数</td>
<td>由用户指定精度的小数，例如，DECIMAL(20,10)表示一共20位，其中小数10位，通常用于财务计算</td>
</tr>
<tr>
<td>CHAR(N)</td>
<td>定长字符串</td>
<td>存储指定长度的字符串，例如，CHAR(100)总是存储100个字符的字符串</td>
</tr>
<tr>
<td>VARCHAR(N)</td>
<td>变长字符串</td>
<td>存储可变长度的字符串，例如，VARCHAR(100)可以存储0~100个字符的字符串</td>
</tr>
<tr>
<td>BOOLEAN</td>
<td>布尔类型</td>
<td>存储True或者False</td>
</tr>
<tr>
<td>DATE</td>
<td>日期类型</td>
<td>存储日期，例如，2018-06-22</td>
</tr>
<tr>
<td>TIME</td>
<td>时间类型</td>
<td>存储时间，例如，12:20:59</td>
</tr>
<tr>
<td>DATETIME</td>
<td>日期和时间类型</td>
<td>存储日期+时间，例如，2018-06-22 12:20:59</td>
</tr>
</tbody></table>
<h4 id="主流关系数据库"><a href="#主流关系数据库" class="headerlink" title="主流关系数据库"></a>主流关系数据库</h4><p>目前，主流的关系数据库主要分为以下几类：</p>
<ol>
<li>商用数据库，例如：<a target="_blank" rel="noopener" href="https://www.oracle.com/">Oracle</a>，<a target="_blank" rel="noopener" href="https://www.microsoft.com/sql-server/">SQL Server</a>，<a target="_blank" rel="noopener" href="https://www.ibm.com/db2/">DB2</a>等；</li>
<li>开源数据库，例如：<a target="_blank" rel="noopener" href="https://www.mysql.com/">MySQL</a>，<a target="_blank" rel="noopener" href="https://www.postgresql.org/">PostgreSQL</a>等；</li>
<li>桌面数据库，以微软<a target="_blank" rel="noopener" href="https://products.office.com/access">Access</a>为代表，适合桌面应用程序使用；</li>
<li>嵌入式数据库，以<a target="_blank" rel="noopener" href="https://sqlite.org/">Sqlite</a>为代表，适合手机应用和桌面程序。</li>
</ol>
<h3 id="MySQL"><a href="#MySQL" class="headerlink" title="MySQL"></a>MySQL</h3><h4 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h4><p>MySQL是目前应用最广泛的开源关系数据库。MySQL最早是由瑞典的MySQL AB公司开发，该公司在2008年被SUN公司收购，紧接着，SUN公司在2009年被Oracle公司收购，所以MySQL最终就变成了Oracle旗下的产品。</p>
<h4 id="MySQL安装"><a href="#MySQL安装" class="headerlink" title="MySQL安装"></a>MySQL安装</h4><p>要安装MySQL，可以从MySQL官方网站下载最新的MySQL Community Server版本：</p>
<p><a target="_blank" rel="noopener" href="https://dev.mysql.com/downloads/mysql/">https://dev.mysql.com/downloads/mysql/</a></p>
<p>安装教程：<a target="_blank" rel="noopener" href="https://dev.mysql.com/doc/refman/5.7/en/mysql-installer-setup.html">MySQL ：： MySQL 5.7 参考手册 ：： 2.3.3.1 MySQL安装程序初始设置</a></p>
<h4 id="使用Docker运行MySQL"><a href="#使用Docker运行MySQL" class="headerlink" title="使用Docker运行MySQL"></a>使用Docker运行MySQL</h4><ol>
<li><p>docker安装最新版mysql</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull mysql</span><br></pre></td></tr></table></figure>
</li>
<li><p>启动服务</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -d --name mysql -p 3306:3306 -e MYSQL_ROOT_PASSWORD=password -v /Users/liaoxuefeng/mysql-data:/var/lib/mysql mysql</span><br><span class="line"><span class="comment"># -d：表示在后台执行；</span></span><br><span class="line"><span class="comment"># --name mysql：表示容器的名字，不输入Docker会自动选择一个名字；</span></span><br><span class="line"><span class="comment"># -p 3306:3306：表示把容器的端口3306映射到本机，这样可以在本机通过3306端口连接MySQL；</span></span><br><span class="line"><span class="comment"># -e MYSQL_ROOT_PASSWORD=password：表示传入一个环境变量，作为root的口令，这里设置的口令是password，不输入此项则会自动生成一个口令，需要查看日志才能知道口令；</span></span><br><span class="line"><span class="comment"># -v /Users/liaoxuefeng/mysql-data:/var/lib/mysql：表示将本地目录映射到容器目录/var/lib/mysql作为MySQL数据库存放的位置，需要将/Users/liaoxuefeng/mysql-data改为你的电脑上的实际目录；</span></span><br><span class="line"><span class="comment"># mysql：最后一个参数是Docker镜像的名称。</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>可以在Docker Desktop的管理窗口中选择<code>Containers</code>，看到正在运行的MySQL</p>
</li>
</ol>
<h3 id="关系模型"><a href="#关系模型" class="headerlink" title="关系模型"></a>关系模型</h3><p>表的每一行称为记录（Record），记录是一个逻辑意义上的数据。<br>表的每一列称为字段（Column），同一个表的每一行记录都拥有相同的若干字段。</p>
<h4 id="主键"><a href="#主键" class="headerlink" title="主键"></a>主键</h4><p>对于关系表，有个很重要的约束，就是任意两条记录不能重复。不能重复不是指两条记录不完全相同，而是指能够通过某个字段唯一区分出不同的记录，这个字段被称为<strong>主键</strong></p>
<p>作为主键最好是完全业务无关的字段，我们一般把这个字段命名为<code>id</code>。常见的可作为<code>id</code>字段的类型有：</p>
<ol>
<li>自增整数类型：数据库会在插入数据时自动为每一条记录分配一个自增整数，这样我们就完全不用担心主键重复，也不用自己预先生成主键；</li>
<li>全局唯一GUID类型：也称UUID，使用一种全局唯一的字符串作为主键，类似<code>8f55d96b-8acc-4636-8cb8-76bf8abc2f57</code>。GUID算法通过网卡MAC地址、时间戳和随机数保证任意计算机在任意时间生成的字符串都是不同的，大部分编程语言都内置了GUID算法，可以自己预算出主键。</li>
</ol>
<p>在定义表结构时，表中定义的主键也是<code>BIGINT NOT NULL AUTO_INCREMENT</code>类型</p>
<table>
<thead>
<tr>
<th>id</th>
<th>s_id</th>
<th>username</th>
<th>age</th>
<th>score</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>小明</td>
<td>18</td>
<td>90</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>小红</td>
<td>19</td>
<td>95</td>
</tr>
</tbody></table>
<p><strong>联合主键</strong></p>
<p>关系数据库实际上还允许通过多个字段唯一标识记录，即两个或更多的字段都设置为主键，这种主键被称为联合主键</p>
<h4 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h4><p>classes表</p>
<table>
<thead>
<tr>
<th>id</th>
<th>name</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>一班</td>
</tr>
<tr>
<td>2</td>
<td>二班</td>
</tr>
</tbody></table>
<p>students表</p>
<table>
<thead>
<tr>
<th>id</th>
<th>class_id</th>
<th>name</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>小明</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>小红</td>
</tr>
<tr>
<td>5</td>
<td>2</td>
<td>小白</td>
</tr>
</tbody></table>
<p>外键定义</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> students</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_class_id</span><br><span class="line"><span class="keyword">FOREIGN</span> KEY (class_id)</span><br><span class="line"><span class="keyword">REFERENCES</span> classes (id);</span><br></pre></td></tr></table></figure>

<p>其中，外键约束的名称<code>fk_class_id</code>可以任意，<code>FOREIGN KEY (class_id)</code>指定了<code>class_id</code>作为外键，<code>REFERENCES classes (id)</code>指定了这个外键将关联到<code>classes</code>表的<code>id</code>列（即<code>classes</code>表的主键）。</p>
<h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h4><p>在关系数据库中，如果有上万甚至上亿条记录，在查找记录的时候，想要获得非常快的速度，就需要使用索引。</p>
<p>索引是关系数据库中对某一列或多个列的值进行预排序的数据结构。通过使用索引，可以让数据库系统不必扫描整个表，而是直接定位到符合条件的记录，这样就大大加快了查询速度。</p>
<p>students表</p>
<table>
<thead>
<tr>
<th>d</th>
<th>class_id</th>
<th>name</th>
<th>gender</th>
<th>score</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>1</td>
<td>小明</td>
<td>M</td>
<td>90</td>
</tr>
<tr>
<td>2</td>
<td>1</td>
<td>小红</td>
<td>F</td>
<td>95</td>
</tr>
<tr>
<td>3</td>
<td>1</td>
<td>小军</td>
<td>M</td>
<td>88</td>
</tr>
</tbody></table>
<p>如果要经常根据<code>score</code>列进行查询，就可以对<code>score</code>列创建索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> students</span><br><span class="line"><span class="keyword">ADD</span> INDEX idx_score (score);</span><br><span class="line"># 使用<span class="keyword">ADD</span> INDEX idx_score (score)就创建了一个名称为idx_score，使用列score的索引。索引名称是任意的，索引如果有多列，可以在括号里依次写上，例如：</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> students</span><br><span class="line"><span class="keyword">ADD</span> INDEX idx_name_score (name, score);</span><br></pre></td></tr></table></figure>

<p><strong>唯一索引</strong></p>
<p>通过<code>UNIQUE</code>关键字添加唯一索引。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> students</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">UNIQUE</span> INDEX uni_name (name);</span><br><span class="line"># 也可以只对某一列添加一个唯一约束而不创建唯一索引，这种情况下，name列没有索引，但仍然具有唯一性保证</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> students</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> uni_name <span class="keyword">UNIQUE</span> (name);</span><br></pre></td></tr></table></figure>



<h3 id="数据库操作"><a href="#数据库操作" class="headerlink" title="数据库操作"></a>数据库操作</h3><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> DATABASE new_database; </span><br></pre></td></tr></table></figure>

<h4 id="查看所有数据库名"><a href="#查看所有数据库名" class="headerlink" title="查看所有数据库名"></a>查看所有数据库名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> DATABASES;</span><br></pre></td></tr></table></figure>

<h4 id="使用数据库"><a href="#使用数据库" class="headerlink" title="使用数据库"></a>使用数据库</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use <span class="operator">&lt;</span>database_name<span class="operator">&gt;</span>; # database_name 为数据库名字</span><br></pre></td></tr></table></figure>

<h4 id="数据库数据导入导出"><a href="#数据库数据导入导出" class="headerlink" title="数据库数据导入导出"></a>数据库数据导入导出</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mysqldump -u username -p old_database &gt; dump.sql  </span><br><span class="line">$ mysql -u username -p new_database &lt; dump.sql  </span><br></pre></td></tr></table></figure>

<h4 id="删除数据库"><a href="#删除数据库" class="headerlink" title="删除数据库"></a>删除数据库</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> DATABASE old_database;</span><br></pre></td></tr></table></figure>



<h4 id="表操作"><a href="#表操作" class="headerlink" title="表操作"></a>表操作</h4><h4 id="创建数据表"><a href="#创建数据表" class="headerlink" title="创建数据表"></a>创建数据表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> table_name (  </span><br><span class="line">    id <span class="type">INT</span> <span class="keyword">PRIMARY</span> KEY,  </span><br><span class="line">    name <span class="type">VARCHAR</span>(<span class="number">50</span>) <span class="keyword">NOT</span> <span class="keyword">NULL</span>,  </span><br><span class="line">    age <span class="type">INT</span>,  </span><br><span class="line">    created_at <span class="type">TIMESTAMP</span> <span class="keyword">DEFAULT</span> <span class="built_in">CURRENT_TIMESTAMP</span>  </span><br><span class="line">); </span><br></pre></td></tr></table></figure>

<ul>
<li><code>PRIMARY KEY</code>：将 id 字段设置为主键，用于唯一标识每一行数据。</li>
<li><code>NOT NULL</code>：表示 name 字段不允许为空值。</li>
<li><code>INT</code> 和 <code>VARCHAR(50)</code> 是数据类型，分别表示整数和字符串，并且可以设置长度。</li>
<li><code>DEFAULT CURRENT_TIMESTAMP</code>：将 created_at 字段默认值设为当前时间戳。</li>
</ul>
<p>除了上述示例中提到的属性外，还有许多其他可用的字段属性，如自增（AUTO_INCREMENT）、唯一约束（UNIQUE）、外键约束（FOREIGN KEY）等。可以根据需要来选择相应的字段属性进行设置。</p>
<h4 id="查看数据库中所有的表"><a href="#查看数据库中所有的表" class="headerlink" title="查看数据库中所有的表"></a>查看数据库中所有的表</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> tables;</span><br></pre></td></tr></table></figure>

<h4 id="查看表结构"><a href="#查看表结构" class="headerlink" title="查看表结构"></a>查看表结构</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DESCRIBE</span> table_name;  </span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2022/08/26/mysql%E5%9F%BA%E7%A1%80/%E8%A1%A8%E7%BB%93%E6%9E%84.png" alt="image-20240726180159047"></p>
<h4 id="修改表名"><a href="#修改表名" class="headerlink" title="修改表名"></a>修改表名</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RENAME <span class="keyword">TABLE</span> employees <span class="keyword">TO</span> staff;  </span><br></pre></td></tr></table></figure>

<h4 id="修改表结构"><a href="#修改表结构" class="headerlink" title="修改表结构"></a>修改表结构</h4><h5 id="添加新列"><a href="#添加新列" class="headerlink" title="添加新列"></a>添加新列</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name  </span><br><span class="line"><span class="keyword">ADD</span> email <span class="type">VARCHAR</span>(<span class="number">50</span>);</span><br></pre></td></tr></table></figure>

<h5 id="修改表某一列的属性"><a href="#修改表某一列的属性" class="headerlink" title="修改表某一列的属性"></a>修改表某一列的属性</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name  </span><br><span class="line">MODIFY age <span class="type">BIGINT</span>; # <span class="type">int</span> <span class="operator">-</span><span class="operator">&gt;</span> <span class="type">BIGINT</span></span><br></pre></td></tr></table></figure>

<h5 id="删除某一列"><a href="#删除某一列" class="headerlink" title="删除某一列"></a>删除某一列</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name  </span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">COLUMN</span> age;  </span><br></pre></td></tr></table></figure>

<h5 id="删除主键并修改主键"><a href="#删除主键并修改主键" class="headerlink" title="删除主键并修改主键"></a>删除主键并修改主键</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name  </span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">PRIMARY</span> KEY,  # 删除原有主键</span><br><span class="line">MODIFY id <span class="type">INT</span> AUTO_INCREMENT,  # id自增</span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">PRIMARY</span> KEY (id);  # 将id设置新主键</span><br></pre></td></tr></table></figure>

<h5 id="添加外键约束"><a href="#添加外键约束" class="headerlink" title="添加外键约束"></a>添加外键约束</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> table_name  </span><br><span class="line"><span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> fk_example <span class="keyword">FOREIGN</span> KEY (parent_id) <span class="keyword">REFERENCES</span> parent_table(id); </span><br></pre></td></tr></table></figure>



<h3 id="查询数据"><a href="#查询数据" class="headerlink" title="查询数据"></a>查询数据</h3><h5 id="基本查询"><a href="#基本查询" class="headerlink" title="基本查询"></a>基本查询</h5><p>查询<code>students</code>表的所有行的所有数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students</span><br></pre></td></tr></table></figure>

<h5 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h5><p>查询<code>students</code>表成绩( score)大于等于80的所有行的所有数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> score <span class="operator">&gt;=</span> <span class="number">80</span>;</span><br></pre></td></tr></table></figure>

<p>查询<code>students</code>表成绩( score)大于等于80且姓’李’的所有行的所有数据</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> score <span class="operator">&gt;=</span> <span class="number">80</span> <span class="keyword">AND</span> name<span class="operator">=</span><span class="string">&#x27;李%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h5 id="条件查询关键字"><a href="#条件查询关键字" class="headerlink" title="条件查询关键字"></a>条件查询关键字</h5><h6 id="IN关键字"><a href="#IN关键字" class="headerlink" title="IN关键字"></a>IN关键字</h6><p>IN 关键字用于判断某个字段的值是否在指定的集合中</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="operator">|</span> 字段名<span class="number">1</span> <span class="operator">|</span> 字段名<span class="number">2</span></span><br><span class="line"><span class="keyword">FROM</span> 表名 </span><br><span class="line"><span class="keyword">where</span> 字段名 [<span class="keyword">NOT</span>] <span class="keyword">IN</span>(元素<span class="number">1</span>,元素<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<h6 id="BETTEEN-ADN-关键字"><a href="#BETTEEN-ADN-关键字" class="headerlink" title="BETTEEN ADN 关键字"></a>BETTEEN ADN 关键字</h6><p>BETWEEN ADN 用于判断某个字段的值是否在指定的范围之内</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> student <span class="keyword">WHERE</span> stuID <span class="keyword">BETWEEN</span> <span class="number">1</span> <span class="keyword">and</span>  <span class="number">3</span></span><br></pre></td></tr></table></figure>

<h6 id="空值查询"><a href="#空值查询" class="headerlink" title="空值查询"></a>空值查询</h6><p>在数据表中,某些列的值可能为空(NULL), 空值不同于0,也不同于空字符串.在MYSQL中,使用is null 来判断字段的值是否为空</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> stuName <span class="keyword">IS</span> <span class="keyword">NOT</span> <span class="keyword">NULL</span></span><br></pre></td></tr></table></figure>

<h6 id="DISTINCT-关键字"><a href="#DISTINCT-关键字" class="headerlink" title="DISTINCT 关键字"></a>DISTINCT 关键字</h6><p>把查询的数据去掉重复的值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="keyword">DISTINCT</span> stuGender <span class="keyword">FROM</span> student</span><br></pre></td></tr></table></figure>

<h6 id="LIKE-关键字"><a href="#LIKE-关键字" class="headerlink" title="LIKE 关键字"></a>LIKE 关键字</h6><p>对某些字符串进行模糊搜索的查询</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="operator">|</span> 字段名<span class="number">1</span> <span class="operator">|</span> 字段名<span class="number">2</span></span><br><span class="line"><span class="keyword">FROM</span> 表名 </span><br><span class="line"><span class="keyword">WHERE</span> 字段名  [<span class="keyword">NOT</span>] <span class="keyword">LIKE</span> <span class="string">&#x27;匹配字符串&#x27;</span></span><br></pre></td></tr></table></figure>

<h6 id="百分号-通配符"><a href="#百分号-通配符" class="headerlink" title="百分号(%)通配符"></a>百分号(%)通配符</h6><p>匹配任意长度的字符串,包括空字符串</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>  <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> stuName <span class="keyword">LIKE</span> <span class="string">&#x27;黄%&#x27;</span></span><br></pre></td></tr></table></figure>

<h6 id="下划线-通配符"><a href="#下划线-通配符" class="headerlink" title="下划线(_)通配符"></a>下划线(_)通配符</h6><p>下划线通配符,只匹配单个字符</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span>  <span class="keyword">FROM</span> student <span class="keyword">WHERE</span> stuName <span class="keyword">LIKE</span> <span class="string">&#x27;黄__&#x27;</span></span><br></pre></td></tr></table></figure>

<h6 id="AND关键字"><a href="#AND关键字" class="headerlink" title="AND关键字"></a>AND关键字</h6><p>使用多个查询条件,且同时满足</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="operator">|</span> 字段名<span class="number">1</span> <span class="operator">|</span> 字段名<span class="number">2</span></span><br><span class="line"><span class="keyword">FROM</span> 表名 </span><br><span class="line"><span class="keyword">WHERE</span> 表达式<span class="number">1</span> <span class="keyword">AND</span> 表达式<span class="number">2</span> </span><br></pre></td></tr></table></figure>

<h6 id="OR关键字"><a href="#OR关键字" class="headerlink" title="OR关键字"></a>OR关键字</h6><p>使用多个查询条件,满足其中一个即可</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="operator">|</span> 字段名<span class="number">1</span> <span class="operator">|</span> 字段名<span class="number">2</span></span><br><span class="line"><span class="keyword">FROM</span> 表名 </span><br><span class="line"><span class="keyword">WHERE</span> 表达式<span class="number">1</span> <span class="keyword">ORDER</span> 表达式<span class="number">2</span> </span><br></pre></td></tr></table></figure>



<h5 id="投影查询-过滤字段"><a href="#投影查询-过滤字段" class="headerlink" title="投影查询 - 过滤字段"></a>投影查询 - 过滤字段</h5><p>查询<code>students</code>表的所有行的id, score, name</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id, score, name <span class="keyword">FROM</span> students;</span><br></pre></td></tr></table></figure>

<h5 id="排序"><a href="#排序" class="headerlink" title="排序"></a>排序</h5><p>查询<code>students</code>表的所有行的id, score, name 并以score升序进行排列 (默认ASC)</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id, name, score <span class="keyword">FROM</span> students <span class="keyword">ORDER</span> <span class="keyword">BY</span> score;</span><br></pre></td></tr></table></figure>

<p>查询<code>students</code>表的所有行的id, score, name 并以score倒序排列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id, name, score <span class="keyword">FROM</span> students <span class="keyword">ORDER</span> <span class="keyword">BY</span> score <span class="keyword">DESC</span>;</span><br></pre></td></tr></table></figure>

<p>查询<code>students</code>表的所有行的id, score,gender, name 并以score升序进行排列，如果有相同的再按gender升序排序</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id, name, gender, score <span class="keyword">FROM</span> students <span class="keyword">ORDER</span> <span class="keyword">BY</span> score ,gender;</span><br></pre></td></tr></table></figure>



<h5 id="聚合查询"><a href="#聚合查询" class="headerlink" title="聚合查询"></a>聚合查询</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) <span class="keyword">FROM</span> students;</span><br><span class="line"><span class="keyword">SELECT</span> <span class="built_in">COUNT</span>(<span class="operator">*</span>) num <span class="keyword">FROM</span> students; # 将字段输出命名为num</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>函数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>SUM</td>
<td>计算某一列的合计值，该列必须为数值类型</td>
</tr>
<tr>
<td>AVG</td>
<td>计算某一列的平均值，该列必须为数值类型</td>
</tr>
<tr>
<td>MAX</td>
<td>计算某一列的最大值</td>
</tr>
<tr>
<td>MIN</td>
<td>计算某一列的最小值</td>
</tr>
<tr>
<td>COUNT</td>
<td>计算内容条数</td>
</tr>
<tr>
<td>FLOOR</td>
<td>向下取整</td>
</tr>
<tr>
<td>CEILING</td>
<td>向上取整</td>
</tr>
<tr>
<td>CONCAT</td>
<td>将两个字符串连接在一起</td>
</tr>
<tr>
<td>SUBSTRING(str,6,5)</td>
<td>提取字符串 - 切片</td>
</tr>
<tr>
<td>UPPER</td>
<td>将字符串转换为大写</td>
</tr>
<tr>
<td>NOW</td>
<td>返回当前日期和时间</td>
</tr>
<tr>
<td>DATE_FORMAT(NOW(), ‘%Y-%m-%d’)</td>
<td>格式化日期</td>
</tr>
<tr>
<td>IF(10 &gt; 5, ‘True’, ‘False’)</td>
<td>根据条件返回不同的值</td>
</tr>
<tr>
<td>RAND()</td>
<td>生成随机数</td>
</tr>
</tbody></table>
<h5 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h5><p>在SQL中，分组查询是一种非常常用的查询方式，它允许我们对查询结果进行分组并对每个分组应用聚合函数来获取汇总信息。在实际应用中，我们经常需要统计某个字段在不同分组下的总数、平均数、最大值、最小值等信息。</p>
<p>假设我们有一个存储员工信息的表Employee，表结构如下：</p>
<p>Employee表结构：</p>
<table>
<thead>
<tr>
<th>emp_id</th>
<th>emp_name</th>
<th>department</th>
<th>salary</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>Alice</td>
<td>Sales</td>
<td>5000</td>
</tr>
<tr>
<td>2</td>
<td>Bob</td>
<td>HR</td>
<td>6000</td>
</tr>
<tr>
<td>3</td>
<td>Carol</td>
<td>Sales</td>
<td>5500</td>
</tr>
<tr>
<td>4</td>
<td>David</td>
<td>HR</td>
<td>7000</td>
</tr>
</tbody></table>
<ol>
<li>现在我们想要按部门统计每个部门的员工数量和平均工资，我们可以使用分组查询来实现：</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT department, COUNT(emp_id) as num_employees, AVG(salary) as avg_salary  </span><br><span class="line">FROM Employee  </span><br><span class="line">GROUP BY department;</span><br></pre></td></tr></table></figure>

<p>运行以上查询后，会得到如下结果：</p>
<table>
<thead>
<tr>
<th>department</th>
<th>num_employees</th>
<th>avg_salary</th>
</tr>
</thead>
<tbody><tr>
<td>Sales</td>
<td>2</td>
<td>5250</td>
</tr>
<tr>
<td>HR</td>
<td>2</td>
<td>6500</td>
</tr>
</tbody></table>
<h5 id="查询结果去重"><a href="#查询结果去重" class="headerlink" title="查询结果去重"></a>查询结果去重</h5><ol>
<li>DISTINCT关键字 - 用关键字给字段添加去重效果</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT DISTINCT column1, column2, ...  </span><br><span class="line">FROM table_name  </span><br><span class="line">WHERE conditions;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>GROUP BY子句</li>
</ol>
<p>使用GROUP BY子句可以将查询结果根据一个或多个列进行分组，并对每个组进行聚合计算。同时，GROUP BY子句会自动去重，因为它只返回每个分组的数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT column1, column2, ...  </span><br><span class="line">FROM table_name  </span><br><span class="line">WHERE conditions  </span><br><span class="line">GROUP BY column1, column2, ...;</span><br></pre></td></tr></table></figure>



<h5 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h5><p>使用SELECT查询时，如果结果集数据量很大，比如几万行数据，放在一个页面显示的话数据量太大，不如分页显示，每次显示100条。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> id, name, gender, score</span><br><span class="line"><span class="keyword">FROM</span> students</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> score <span class="keyword">DESC</span></span><br><span class="line">LIMIT <span class="number">100</span> <span class="keyword">OFFSET</span> <span class="number">0</span>; </span><br><span class="line"># 每页数据<span class="number">100</span>条，查询第<span class="number">1</span>页；注意<span class="keyword">SQL</span>记录集的索引从<span class="number">0</span>开始</span><br><span class="line"># <span class="keyword">OFFSET</span>超过了查询的最大数量并不会报错，而是得到一个空的结果集。</span><br></pre></td></tr></table></figure>

<p><code>OFFSET</code>是可选的，如果只写<code>LIMIT 15</code>，那么相当于<code>LIMIT 15 OFFSET 0</code>。<br>在MySQL中，<code>LIMIT 15 OFFSET 30</code>还可以简写成<code>LIMIT 30, 15</code>。<br>使用<code>LIMIT &lt;M&gt; OFFSET &lt;N&gt;</code>分页时，随着<code>N</code>越来越大，查询效率也会越来越低。</p>
<h5 id><a href="#" class="headerlink" title></a></h5><h5 id="多表查询"><a href="#多表查询" class="headerlink" title="多表查询"></a>多表查询</h5><p>返回两个表中所有行的组合</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span></span><br><span class="line">    s.id sid,</span><br><span class="line">    s.name,</span><br><span class="line">    s.gender,</span><br><span class="line">    s.score,</span><br><span class="line">    c.id cid,</span><br><span class="line">    c.name cname</span><br><span class="line"><span class="keyword">FROM</span> students s, classes c;</span><br></pre></td></tr></table></figure>

<h5 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h5><p><strong>INNER JOIN - 内连接</strong></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.id, s.name, s.class_id, c.name class_name, s.gender, s.score</span><br><span class="line"><span class="keyword">FROM</span> students s</span><br><span class="line"><span class="keyword">INNER</span> <span class="keyword">JOIN</span> classes c</span><br><span class="line"><span class="keyword">ON</span> s.class_id <span class="operator">=</span> c.id;</span><br></pre></td></tr></table></figure>

<ol>
<li>先确定主表，仍然使用<code>FROM &lt;表1&gt;</code>的语法；</li>
<li>再确定需要连接的表，使用<code>INNER JOIN &lt;表2&gt;</code>的语法；</li>
<li>然后确定连接条件，使用<code>ON &lt;条件...&gt;</code>，这里的条件是<code>s.class_id = c.id</code>，表示<code>students</code>表的<code>class_id</code>列与<code>classes</code>表的<code>id</code>列相同的行需要连接；</li>
<li>可选：加上<code>WHERE</code>子句、<code>ORDER BY</code>等子句。</li>
</ol>
<p><strong>OUTER JOIN - 外连接</strong></p>
<p>当外表中没有与内表匹配的数据时，外连接会在结果集中填充NULL值</p>
<p><strong>RIGHT OUTER JOIN - 右外连接</strong></p>
<p>RIGHT OUTER JOIN（右外连接）则会返回右表中的所有行以及左表中与右表匹配的行，如果左表中没有匹配的行，则会在结果集中为左表的列填充NULL值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.id, s.name, s.class_id, c.name class_name, s.gender, s.score</span><br><span class="line"><span class="keyword">FROM</span> students s</span><br><span class="line"><span class="keyword">RIGHT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> classes c</span><br><span class="line"><span class="keyword">ON</span> s.class_id <span class="operator">=</span> c.id;</span><br></pre></td></tr></table></figure>



<p><strong>LEFT OUTER JOIN - 左外连接</strong></p>
<p>LEFT OUTER JOIN（左外连接）会返回左表中的所有行以及右表中与左表匹配的行，如果右表中没有匹配的行，则会在结果集中为右表的列填充NULL值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.id, s.name, s.class_id, c.name class_name, s.gender, s.score</span><br><span class="line"><span class="keyword">FROM</span> students s</span><br><span class="line"><span class="keyword">LEFT</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> classes c</span><br><span class="line"><span class="keyword">ON</span> s.class_id <span class="operator">=</span> c.id;</span><br></pre></td></tr></table></figure>



<p><strong>FULL OUTER JOIN - 全外连接</strong></p>
<p>FULL OUTER JOIN（全外连接）则会返回左表和右表中的所有行，并在结果集中为没有匹配的行填充NULL值。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">SELECT</span> s.id, s.name, s.class_id, c.name class_name, s.gender, s.score</span><br><span class="line"><span class="keyword">FROM</span> students s</span><br><span class="line"><span class="keyword">FULL</span> <span class="keyword">OUTER</span> <span class="keyword">JOIN</span> classes c</span><br><span class="line"><span class="keyword">ON</span> s.class_id <span class="operator">=</span> c.id;</span><br></pre></td></tr></table></figure>

<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2022/08/26/mysql%E5%9F%BA%E7%A1%80/%E5%A4%96%E8%BF%9E%E6%8E%A5.png" alt="image-20240726173438999"></p>
<h5 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h5><p>假设有两个表<code>customers</code>和<code>orders</code>，我们想要查询每个客户的订单总金额，如果不使用JOIN语法，我们可以使用子查询来代替</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SELECT customer_id,   </span><br><span class="line">       (SELECT SUM(total_amount) FROM orders WHERE customer_id = customers.customer_id) AS total_order_amount  </span><br><span class="line">FROM customers;</span><br></pre></td></tr></table></figure>



<h3 id="修改数据"><a href="#修改数据" class="headerlink" title="修改数据"></a>修改数据</h3><h4 id="插入数据"><a href="#插入数据" class="headerlink" title="插入数据"></a>插入数据</h4><p>当我们需要向数据库表中插入一条新记录时，使用<code>INSERT</code>语句。</p>
<ul>
<li>INSERT INTO &lt;表名&gt; (字段1, 字段2, …) VALUES (值1, 值2, …);</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students (class_id, name, gender, score) <span class="keyword">VALUES</span> (<span class="number">2</span>, <span class="string">&#x27;老大&#x27;</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">80</span>);</span><br><span class="line"># 插入多条数据</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> students (class_id, name, gender, score) <span class="keyword">VALUES</span></span><br><span class="line">  (<span class="number">3</span>, <span class="string">&#x27;老二&#x27;</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">87</span>),</span><br><span class="line">  (<span class="number">4</span>, <span class="string">&#x27;老三&#x27;</span>, <span class="string">&#x27;M&#x27;</span>, <span class="number">81</span>);</span><br><span class="line"># 可以使用不写字段的方式直接插入数据，需要注意字段个数和排序位置</span><br><span class="line"><span class="keyword">INSERT</span> <span class="keyword">INTO</span> table_name  </span><br><span class="line"><span class="keyword">VALUES</span> (value1, value2, value3, ...); </span><br></pre></td></tr></table></figure>



<h4 id="更新数据"><a href="#更新数据" class="headerlink" title="更新数据"></a>更新数据</h4><p>更新数据库表中的记录，使用<code>UPDATE</code>语句</p>
<ul>
<li>UPDATE &lt;表名&gt; SET 字段1&#x3D;值1, 字段2&#x3D;值2, … WHERE …;</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">UPDATE</span> students <span class="keyword">SET</span> name<span class="operator">=</span><span class="string">&#x27;大牛&#x27;</span>, score<span class="operator">=</span><span class="number">66</span> <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>;</span><br><span class="line"><span class="keyword">UPDATE</span> students <span class="keyword">SET</span> score<span class="operator">=</span>score<span class="operator">+</span><span class="number">10</span> <span class="keyword">WHERE</span> score<span class="operator">&lt;</span><span class="number">80</span>;</span><br></pre></td></tr></table></figure>



<h4 id="删除数据"><a href="#删除数据" class="headerlink" title="删除数据"></a>删除数据</h4><p>删除数据库表中的记录，我们可以使用<code>DELETE</code>语句。</p>
<ul>
<li>DELETE FROM &lt;表名&gt; WHERE …;</li>
</ul>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> students <span class="keyword">WHERE</span> id<span class="operator">=</span><span class="number">1</span>;</span><br></pre></td></tr></table></figure>



<h3 id="临时表"><a href="#临时表" class="headerlink" title="临时表"></a>临时表</h3><p>临时表是在查询中临时创建和使用的表，用于存储中间结果或者临时数据，在查询结束后会自动销毁，不保留数据。使用临时表可以帮助简化复杂查询、提高性能和降低查询的复杂度。</p>
<h4 id="创建临时表"><a href="#创建临时表" class="headerlink" title="创建临时表"></a>创建临时表</h4><blockquote>
<p>在SQL语句中，可以使用<code>CREATE TEMPORARY TABLE</code>语句来创建临时表。临时表只在当前会话中存在，并且在会话结束时自动销毁。临时表的结构和普通表一样，可以像普通表一样进行数据插入、查询、更新和删除操作。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE TEMPORARY TABLE temp_table (  </span><br><span class="line">    column1 datatype,  </span><br><span class="line">    column2 datatype,  </span><br><span class="line">    ...  </span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h4 id="填充临时表"><a href="#填充临时表" class="headerlink" title="填充临时表"></a>填充临时表</h4><blockquote>
<p>创建了临时表后，可以使用<code>INSERT INTO</code>语句将数据插入临时表中。可以使用SELECT语句来从其他表中选择数据插入到临时表中。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO temp_table  </span><br><span class="line">SELECT column1, column2, ...  </span><br><span class="line">FROM source_table  </span><br><span class="line">WHERE condition;</span><br></pre></td></tr></table></figure>

<h4 id="查询临时表"><a href="#查询临时表" class="headerlink" title="查询临时表"></a>查询临时表</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT *  </span><br><span class="line">FROM temp_table;</span><br></pre></td></tr></table></figure>

<h4 id="使用临时表进行多表查询"><a href="#使用临时表进行多表查询" class="headerlink" title="使用临时表进行多表查询"></a>使用临时表进行多表查询</h4><blockquote>
<p>临时表通常用于处理复杂的查询需求，例如多表关联查询。可以使用临时表来存储需要联合查询的表数据，然后再基于临时表进行进一步的查询操作。</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE TEMPORARY TABLE temp_orders AS   </span><br><span class="line">SELECT customer_id, COUNT(*) AS order_count, SUM(total_amount) AS total_order_amount  </span><br><span class="line">FROM orders  </span><br><span class="line">GROUP BY customer_id;  </span><br><span class="line"></span><br><span class="line">SELECT c.customer_id, c.customer_name, t.order_count, t.total_order_amount  </span><br><span class="line">FROM customers c  </span><br><span class="line">JOIN temp_orders t ON c.customer_id = t.customer_id;</span><br></pre></td></tr></table></figure>



<h3 id="视图"><a href="#视图" class="headerlink" title="视图"></a>视图</h3><p>SQL视图是虚拟表，它是从一个或多个基本表中导出的表，用户可以像使用表一样对其进行查询和操作。视图可以基于一个表或多个表，还可以基于其他视图。</p>
<p>SQL视图使用的主要作用有：</p>
<ol>
<li>简化复杂查询：视图可以隐藏复杂的SQL查询逻辑，将其封装为一个简单的表结构，方便用户查询和理解。</li>
<li>数据安全性控制：通过视图，可以限制用户只能访问特定的列或行，从而保护敏感数据。可以通过视图来隐藏敏感数据，并且只提供给用户可见的数据。</li>
<li>数据逻辑封装：视图可以将多个表的关联操作封装成一个视图，从而简化数据库操作和维护。当基础表发生变化时，只需要重新定义视图，而不需要修改查询逻辑。</li>
<li>简化数据操作：通过视图，可以将复杂的数据操作逻辑封装为一个视图，用户只需要对视图进行增删改查操作，而不需要了解底层的数据结构和操作方式。</li>
</ol>
<h4 id="创建视图-单表结果"><a href="#创建视图-单表结果" class="headerlink" title="创建视图 - 单表结果"></a>创建视图 - 单表结果</h4><p>将Employee 表的emp_id, emp_name, department, salary 字段数据作为新创建的视图表EmployeeView 的数据</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW EmployeeView AS  </span><br><span class="line">SELECT emp_id, emp_name, department, salary  </span><br><span class="line">FROM Employee;</span><br></pre></td></tr></table></figure>

<h4 id="创建视图-多表结果"><a href="#创建视图-多表结果" class="headerlink" title="创建视图 - 多表结果"></a>创建视图 - 多表结果</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CREATE VIEW EmployeeDepartmentView AS  </span><br><span class="line">SELECT emp_id, emp_name, Employee.department_id, salary, department_name  </span><br><span class="line">FROM Employee  </span><br><span class="line">JOIN Department ON Employee.department_id = Department.department_id;</span><br></pre></td></tr></table></figure>



<h3 id="视图和临时表的区别"><a href="#视图和临时表的区别" class="headerlink" title="视图和临时表的区别"></a>视图和临时表的区别</h3><blockquote>
<p>视图用于简化数据查询和操作，提高数据的安全性和可维护性，而临时表用于存储临时数据或中间结果，辅助进行复杂的数据处理操作。</p>
</blockquote>
<ol>
<li>视图（View）：</li>
</ol>
<ul>
<li>视图是基于表或其他视图的查询结果集，是一个虚拟的表，不存储实际数据，只存储查询定义。</li>
<li>视图可以隐藏复杂的数据结构和查询逻辑，简化用户对数据的访问。</li>
<li>视图可以用于限制用户对数据的访问权限，只允许用户访问视图中指定的列或行。</li>
<li>视图可以提高数据的安全性，通过视图可以隐藏敏感数据，只暴露需要的数据给用户。</li>
<li>视图的数据是动态的，当基础表的数据发生变化时，视图的数据也会相应地更新。</li>
</ul>
<ol start="2">
<li>临时表（Temporary Table）：</li>
</ol>
<ul>
<li>临时表是一个临时存储数据的表，它可以在会话级别或事务级别存在，当会话结束或事务结束后数据会被销毁。</li>
<li>临时表常用于存储中间结果或临时数据，用于辅助复杂的数据处理操作。</li>
<li>临时表可以提高查询性能，当需要多次查询同一组数据时，可以将结果存储在临时表中，避免重复计算。</li>
<li>临时表的作用范围有限，只在当前会话或当前事务中有效，不会对其他用户产生影响。</li>
<li>临时表不会和永久表共享相同的表空间，占用的内存和磁盘资源较小。</li>
</ul>
<h3 id="索引-1"><a href="#索引-1" class="headerlink" title="索引"></a>索引</h3><p>索引是一种用于提高数据库查询性能的数据结构。它类似于书籍中的目录，可以加快数据库的查询速度。索引存储特定列（或多列）的值，以便在查询中快速定位到所需的行。</p>
<h4 id="索引类型"><a href="#索引类型" class="headerlink" title="索引类型"></a>索引类型</h4><p>MySQL支持多种类型的索引，常见的索引类型包括：</p>
<ol>
<li>B-Tree索引：B-Tree（平衡树）索引是MySQL中最常用的索引类型。它适用于等值查询、范围查询和排序操作。B-Tree索引适用于大多数场景，包括单列索引、组合索引和唯一索引。</li>
<li>哈希索引：哈希索引适用于等值查询，但不支持范围查询和排序操作。哈希索引将索引列的值通过哈希函数映射到一个哈希表中，可以快速定位到具体的数据行。但是，哈希索引不适用于范围查询和模糊查询。</li>
<li>全文索引：全文索引用于全文搜索，适用于对文本内容进行关键字搜索的场景。全文索引可以提供更高级的搜索功能，如关键字匹配、模糊搜索和排序。</li>
<li>空间索引：空间索引用于处理地理空间数据，如地理位置坐标。它支持空间数据类型和空间函数，可以进行空间范围查询和距离计算。</li>
<li>前缀索引：前缀索引是指只对索引列的前缀部分进行索引，而不是整个列。它可以减少索引的存储空间，但可能会影响查询的性能。</li>
<li>其他特殊索引：MySQL还支持其他一些特殊类型的索引，如全文空间索引、JSON索引等，用于特定的数据类型和查询需求。</li>
</ol>
<p>根据具体的业务需求和查询模式，选择合适的索引类型非常重要。通常，使用B-Tree索引是最常见和通用的选择，但在特定场景下，其他类型的索引也可以提供更好的性能和功能。</p>
<h4 id="MySQL索引原理"><a href="#MySQL索引原理" class="headerlink" title="MySQL索引原理"></a>MySQL索引原理</h4><p>MySQL索引是一种数据结构，用于加快数据库查询操作的速度。索引基于B-Tree（平衡树）或哈希表等数据结构实现，它们允许快速定位和访问存储在数据库表中的数据。</p>
<p>MySQL索引的原理如下：</p>
<ol>
<li><p>B-Tree索引原理：</p>
<ul>
<li><p>B-Tree是一种平衡树结构，它具有多个层级，每个层级都有多个节点。根节点位于最上层，叶子节点位于最下层。</p>
</li>
<li><p>每个节点包含多个键值对，其中键是索引列的值，值是指向对应数据行的指针。</p>
</li>
<li><p>B-Tree索引按照键的顺序进行排序，使得查询时可以使用二分查找的方式快速定位到目标数据。</p>
</li>
<li><p>B-Tree索引支持等值查询、范围查询和排序操作，它可以有效地减少查询的数据访问量。</p>
</li>
</ul>
</li>
<li><p>哈希索引原理：</p>
<ul>
<li><p>哈希索引使用哈希函数将索引列的值映射到一个哈希表中的槽位。</p>
</li>
<li><p>哈希表是一个数组，每个槽位存储一个指针，指向对应数据行的位置。</p>
</li>
<li><p>哈希索引通过哈希函数的计算，可以快速定位到目标数据行，具有O(1)的查询时间复杂度。</p>
</li>
<li><p>哈希索引适用于等值查询，但不支持范围查询和排序操作。</p>
</li>
</ul>
</li>
</ol>
<p>MySQL索引的工作原理如下：</p>
<ol>
<li>创建索引：当在表的列上创建索引时，MySQL会根据索引类型（如B-Tree或哈希）创建相应的数据结构，并将索引列的值和对应的指针存储在索引结构中。</li>
<li>查询优化器：当执行查询语句时，MySQL的查询优化器会分析查询语句和表的结构，决定使用哪个索引来执行查询。优化器会考虑索引的选择性、列的顺序、查询条件等因素，选择最优的索引。</li>
<li>索引扫描：当使用索引执行查询时，MySQL会根据索引的数据结构进行索引扫描。对于B-Tree索引，MySQL会根据查询条件的范围进行二分查找，定位到目标数据行。对于哈希索引，MySQL会通过哈希函数计算，直接定位到目标数据行。</li>
<li>数据访问：一旦定位到目标数据行，MySQL会使用指针获取对应的数据，并返回给查询结果。</li>
</ol>
<p>需要注意的是，索引的创建和维护会带来一定的开销，包括存储空间和写操作的性能。因此，需要根据具体的业务需求和查询模式，合理选择和使用索引，以平衡查询性能和存储开销。</p>
<h4 id="MySQL索引是如何支持百万级别查询的"><a href="#MySQL索引是如何支持百万级别查询的" class="headerlink" title="MySQL索引是如何支持百万级别查询的"></a>MySQL索引是如何支持百万级别查询的</h4><p>MySQL索引是基于B+树的，B+树是类似与跳表的一种数据结构，查询效率为log(N)</p>
<h4 id="创建索引的方法"><a href="#创建索引的方法" class="headerlink" title="创建索引的方法"></a>创建索引的方法</h4><p>在SQL中，可以使用以下语法为表添加索引：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> INDEX index_name <span class="keyword">ON</span> table_name (column_name);  </span><br><span class="line"># 创建了一个针对table_name表中column_name列的索引。这样可以加快对column_name列的查询速度。</span><br></pre></td></tr></table></figure>

<ul>
<li>index_name：指定索引的名称。</li>
<li>table_name：指定要添加索引的表名。</li>
<li>column_name：指定要添加索引的列名。</li>
</ul>
<h4 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h4><p>索引适合用于以下情况：</p>
<ul>
<li>频繁用于查询的列：对于经常用于WHERE子句、JOIN子句或ORDER BY子句的列，创建索引可以提高查询性能。</li>
<li>字段的取值范围广泛：如果某列的取值范围很大，例如性别字段或状态字段，可以考虑为该列创建索引。</li>
<li>经常需要排序的列：对于经常需要按特定列排序的查询，创建索引可以加快排序的速度。</li>
<li>经常用于连接的列：对于经常用于JOIN操作的列，创建索引可以提高连接的效率。</li>
</ul>
<h4 id="索引使用注意事项"><a href="#索引使用注意事项" class="headerlink" title="索引使用注意事项"></a>索引使用注意事项</h4><ul>
<li>不要滥用索引：创建过多的索引可能会降低数据插入、更新和删除操作的性能，因此应谨慎选择需要创建索引的列。</li>
<li>对于小数据量表：一些小表可能不需要额外的索引，因为全表扫描的成本可能更低。</li>
<li>定期维护索引：随着数据的变化，索引可能会失效或不再有效，因此应定期进行索引重建或重新组织操作。</li>
</ul>
<h4 id="MySQL索引为什么不能过多也不能太少"><a href="#MySQL索引为什么不能过多也不能太少" class="headerlink" title="MySQL索引为什么不能过多也不能太少"></a>MySQL索引为什么不能过多也不能太少</h4><p>MySQL索引的数量需要适度，既不能过多也不能太少，这是为了平衡查询性能和存储空间的考虑。</p>
<p>如果索引过多，会导致以下问题：</p>
<ol>
<li>存储空间占用：每个索引都需要占用额外的存储空间。如果索引过多，会增加数据库的存储需求，占用更多的磁盘空间。</li>
<li>写操作性能下降：每次对表进行插入、更新或删除操作时，都需要更新索引。如果索引过多，写操作的性能会下降，因为需要更新更多的索引。</li>
<li>查询优化器的选择困难：查询优化器在决定使用哪个索引来执行查询时，需要考虑多个索引的选择。如果索引过多，查询优化器的选择过程会变得复杂，可能导致性能下降。</li>
</ol>
<p>另一方面，如果索引太少，会导致以下问题：</p>
<ol>
<li>查询性能下降：没有足够的索引可能导致查询的性能下降。查询需要扫描更多的数据行，而不是直接使用索引进行快速定位，从而增加了查询的时间复杂度。</li>
<li>数据库负载增加：缺乏索引可能导致数据库的负载增加。查询需要扫描更多的数据行，消耗更多的CPU和内存资源，降低整体的数据库性能。</li>
</ol>
<p>因此，为了平衡查询性能和存储空间的需求，需要根据具体的业务场景和查询模式来合理选择和创建索引。需要根据经验和性能测试来评估索引的效果，并根据实际情况进行调整和优化。</p>
<h4 id="数据库优化思路"><a href="#数据库优化思路" class="headerlink" title="数据库优化思路"></a>数据库优化思路</h4><p>数据库优化是提高数据库性能和效率的过程。以下是一些常见的数据库优化思路：</p>
<ol>
<li>索引优化：合理创建和使用索引可以提高查询性能。分析常用的查询语句，确定需要的索引类型和字段，并避免创建过多或不必要的索引。定期检查索引的使用情况，进行索引重建或删除不需要的索引。</li>
<li>查询优化：优化查询语句可以减少数据库的负载和提高查询性能。使用合适的查询语法和操作符，避免使用全表扫描和不必要的连接操作。使用EXPLAIN语句分析查询计划，优化查询的执行路径。</li>
<li>看数据库设计优化：合理的数据库设计可以提高查询和操作的效率。使用适当的数据类型和字段长度，避免冗余和重复数据。规范化和反规范化的选择要根据具体的业务需求和查询模式进行权衡。</li>
<li>缓存优化：使用缓存技术可以减少对数据库的访问，提高响应速度。常见的缓存技术包括数据库查询缓存、应用程序级缓存、分布式缓存等。根据业务需求和数据更新频率，选择合适的缓存策略和缓存工具。</li>
<li>硬件优化：合理配置和优化数据库服务器的硬件资源可以提高数据库性能。增加内存容量，优化磁盘和网络配置，调整数据库参数等都可以对性能产生影响。</li>
<li>定期维护和监控：定期进行数据库维护和监控是保持数据库性能的关键。包括备份和恢复、数据清理、统计信息收集、日志管理等。监控数据库的性能指标，如CPU利用率、内存使用、磁盘IO等，及时发现和解决性能问题。</li>
<li>并发控制和事务管理：合理管理并发访问和事务操作可以提高数据库的并发性和数据一致性。使用适当的锁机制、事务隔离级别和并发控制策略，避免死锁和数据冲突。</li>
</ol>
<p>数据库优化是一个持续的过程，需要根据实际情况进行分析、调整和优化。通过综合考虑索引、查询、设计、缓存、硬件、维护和并发控制等方面的优化，可以提高数据库的性能和效率。</p>
<h4 id="慢查询如何优化"><a href="#慢查询如何优化" class="headerlink" title="慢查询如何优化"></a>慢查询如何优化</h4><ol>
<li><strong>使用合适的索引</strong>：<ul>
<li>确保数据库表的相关字段上建立了索引，这样可以加快查询速度。</li>
<li>分析查询语句中的条件，确定哪些条件经常被用来检索数据，为这些字段添加索引。</li>
</ul>
</li>
<li><strong>优化查询语句</strong>：<ul>
<li>确保查询语句写法正确，避免使用复杂的子查询和联合查询。</li>
<li>避免使用SELECT *，只选择需要的字段。</li>
<li>使用EXPLAIN语句来分析查询执行计划，查看是否有不必要的全表扫描或索引未命中。</li>
</ul>
</li>
<li><strong>优化表结构</strong>：<ul>
<li>避免使用过多的JOIN操作，考虑是否需要将表拆分或者进行冗余设计。</li>
<li>对于大量数据的表，考虑进行分区或分表操作，以减少查询范围。</li>
</ul>
</li>
<li><strong>限制返回数据量</strong>：<ul>
<li>如果只需要一部分数据，可以使用LIMIT进行限制返回数据的数量。</li>
<li>考虑是否需要分页查询，以避免一次性返回大量数据。</li>
</ul>
</li>
<li><strong>缓存</strong>：<ul>
<li>对于静态数据或者不经常变动的数据，可以考虑使用缓存来减少数据库查询次数。</li>
</ul>
</li>
<li><strong>定期优化数据库</strong>：<ul>
<li>定期分析数据库性能，清理无用数据、优化表结构、重新调整索引等。</li>
</ul>
</li>
<li><strong>数据库参数调优</strong>：<ul>
<li>根据数据库类型和版本，调整数据库参数来提高性能，如优化缓冲区大小、连接数等</li>
</ul>
</li>
</ol>
<h3 id="事务"><a href="#事务" class="headerlink" title="事务"></a>事务</h3><p>把多条sql语句作为一个整体进行操作的功能，被称为数据库<strong>事务</strong></p>
<p>数据库事务可以确保该事务范围内的所有操作都可以全部成功或者全部失败。如果事务失败，那么效果就和没有执行这些SQL一样，不会对数据库数据有任何改动。</p>
<h4 id="数据库事务具有ACID这4个特性"><a href="#数据库事务具有ACID这4个特性" class="headerlink" title="数据库事务具有ACID这4个特性"></a>数据库事务具有ACID这4个特性</h4><ul>
<li>A：Atomicity，原子性，将所有SQL作为原子工作单元执行，要么全部执行，要么全部不执行；</li>
<li>C：Consistency，一致性，事务完成后，所有数据的状态都是一致的，即A账户只要减去了100，B账户则必定加上了100；</li>
<li>I：Isolation，隔离性，如果有多个事务并发执行，每个事务作出的修改必须与其他事务隔离；</li>
<li>D：Durability，持久性，即事务完成后，对数据库数据的修改被持久化存储。</li>
</ul>
<h4 id="隐式事务"><a href="#隐式事务" class="headerlink" title="隐式事务"></a>隐式事务</h4><p>对于单条SQL语句，数据库系统自动将其作为一个事务执行，这种事务被称为<em>隐式事务</em>。</p>
<h4 id="显式事务"><a href="#显式事务" class="headerlink" title="显式事务"></a>显式事务</h4><p>要手动把多条SQL语句作为一个事务执行，使用<code>BEGIN</code>开启一个事务，使用<code>COMMIT</code>提交一个事务，这种事务被称为<em>显式事务</em></p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line">    <span class="keyword">BEGIN</span> TRANSACTION; <span class="comment">-- 开启事务</span></span><br><span class="line">    <span class="keyword">UPDATE</span> accounts <span class="keyword">SET</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">100</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">UPDATE</span> accounts <span class="keyword">SET</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">100</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">COMMIT</span>;</span><br><span class="line"># <span class="keyword">COMMIT</span>是指提交事务，即试图把事务内的所有<span class="keyword">SQL</span>所做的修改永久保存。</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">BEGIN</span>;</span><br><span class="line">    <span class="keyword">BEGIN</span> TRANSACTION; <span class="comment">-- 开启事务</span></span><br><span class="line">    <span class="keyword">UPDATE</span> accounts <span class="keyword">SET</span> balance <span class="operator">=</span> balance <span class="operator">-</span> <span class="number">100</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">UPDATE</span> accounts <span class="keyword">SET</span> balance <span class="operator">=</span> balance <span class="operator">+</span> <span class="number">100</span> <span class="keyword">WHERE</span> id <span class="operator">=</span> <span class="number">2</span>;</span><br><span class="line"><span class="keyword">ROLLBACK</span>;</span><br><span class="line"># 有些时候，我们希望主动让事务失败，这时，可以用<span class="keyword">ROLLBACK</span>回滚事务，整个事务会失败</span><br></pre></td></tr></table></figure>

<h4 id="什么是分布式事务"><a href="#什么是分布式事务" class="headerlink" title="什么是分布式事务"></a>什么是分布式事务</h4><p>分布式事务是指涉及多个独立的计算机系统或数据库的事务操作。在分布式系统中，每个计算机系统或数据库都可以独立执行事务，但这些事务可能需要保持一致性和原子性。</p>
<p>为了实现分布式事务，通常使用一些协调机制和协议，如两阶段提交（Two-Phase Commit，2PC）、三阶段提交（Three-Phase Commit，3PC）、补偿事务（Compensating Transaction）等。这些机制和协议用于确保所有参与的系统或数据库在事务执行期间保持一致，并在需要时进行回滚或恢复。</p>
<p>分布式事务的设计和实现需要考虑网络延迟、故障恢复、并发访问等因素，以确保事务的正确性和可靠性</p>
<h4 id="分布式节点的接入和一致性"><a href="#分布式节点的接入和一致性" class="headerlink" title="分布式节点的接入和一致性"></a>分布式节点的接入和一致性</h4><ol>
<li><p>分布式节点的接入：当新的节点加入分布式系统时，需要确保其能够正确地与其他节点进行通信和协作。以下是一些常见的方法和技术：</p>
<ul>
<li><p>注册和发现：新节点可以通过注册自身的信息，如IP地址、端口号等，使其他节点能够发现和连接它。常见的注册和发现机制包括服务注册中心、DNS等。</p>
</li>
<li><p>节点间通信：节点之间需要建立可靠的通信渠道，以便进行消息传递和协作。常见的通信协议包括HTTP、TCP&#x2F;IP、消息队列等。</p>
</li>
<li><p>负载均衡：为了平衡节点的负载和提高系统的可扩展性，可以使用负载均衡技术，将请求分发到不同的节点上。常见的负载均衡策略包括轮询、最少连接等。</p>
</li>
</ul>
</li>
<li><p>分布式节点的一致性：在分布式系统中，节点之间的数据一致性是一个重要的问题。当多个节点同时对数据进行读写操作时，需要确保数据的一致性。以下是一些常见的方法和技术：</p>
<ul>
<li><p>一致性协议：使用一致性协议来确保节点之间的数据一致性。常见的一致性协议包括两阶段提交（2PC）、三阶段提交（3PC）、Paxos、Raft等。</p>
</li>
<li><p>数据复制：将数据复制到多个节点上，以提高数据的可用性和容错性。常见的数据复制策略包括主从复制、多主复制等。</p>
</li>
<li><p>时钟同步：节点之间的时钟同步是保证分布式系统一致性的关键。通过使用时钟同步协议，可以确保节点之间的时间一致性，以便进行正确的时间戳和顺序处理。</p>
</li>
<li><p>冲突解决：当多个节点同时对数据进行写操作时，可能会发生冲突。使用冲突解决策略，如乐观锁、悲观锁、版本控制等，可以解决冲突并保持数据的一致性。</p>
</li>
</ul>
</li>
</ol>
<h3 id="存储过程"><a href="#存储过程" class="headerlink" title="存储过程"></a>存储过程</h3><p>存储过程是一组预定义的SQL语句集合，可以被保存在数据库中并被多次调用。存储过程使得数据库操作更加模块化、可重用，并可以提高性能。类似于编程语言的方法函数</p>
<h4 id="存储过程特点"><a href="#存储过程特点" class="headerlink" title="存储过程特点"></a>存储过程特点</h4><ul>
<li>存储过程是一段被编译、存储在数据库中并可供重复使用的SQL代码块。</li>
<li>存储过程可以接受参数作为输入和输出。</li>
<li>存储过程可以包含流程控制语句、循环语句、条件语句等，使得复杂的逻辑操作可以在数据库层面完成。</li>
<li>存储过程可以提高数据库的性能，减少网络通信开销，并减少客户端与数据库之间的交互次数。</li>
</ul>
<h4 id="创建存储过程的方法"><a href="#创建存储过程的方法" class="headerlink" title="创建存储过程的方法"></a>创建存储过程的方法</h4><p>在SQL中，可以使用以下语法创建存储过程：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE procedure_name  </span><br><span class="line">AS  </span><br><span class="line">BEGIN  </span><br><span class="line">    -- SQL 语句 </span><br><span class="line">END;  </span><br></pre></td></tr></table></figure>

<ul>
<li>procedure_name：指定存储过程的名称。</li>
<li>AS BEGIN 和 END 之间是存储过程的SQL代码逻辑</li>
</ul>
<h4 id="使用存储过程的方法"><a href="#使用存储过程的方法" class="headerlink" title="使用存储过程的方法"></a>使用存储过程的方法</h4><ul>
<li>调用存储过程：使用 <code>EXECUTE</code> 或 <code>CALL</code> 关键字来执行存储过程。例如：<code>EXECUTE procedure_name;</code></li>
<li>传递参数：存储过程可以接受参数，参数可以是输入参数、输出参数或输入输出参数。在创建存储过程时定义参数，并在调用存储过程时传递参数。</li>
<li>修改存储过程：通过 <code>ALTER PROCEDURE</code> 命令来修改存储过程的定义。</li>
<li>删除存储过程：使用 <code>DROP PROCEDURE</code> 命令来删除存储过程。</li>
</ul>
<h4 id="输入输出参数"><a href="#输入输出参数" class="headerlink" title="输入输出参数"></a>输入输出参数</h4><p>输入输出参数结合了输入参数和输出参数的功能，允许存储过程接受参数值并将计算结果返回给调用者。在存储过程定义中，通过在参数名称前面加上 <code>INOUT</code> 或 <code>IN OUTPUT</code> 关键字来声明输入输出参数。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE sp_UpdateEmployeeSalary  </span><br><span class="line">    @employee_id INT,  </span><br><span class="line">    @new_salary DECIMAL(10,2) INOUT  </span><br><span class="line">AS  </span><br><span class="line">BEGIN  </span><br><span class="line">    UPDATE Employee SET salary = @new_salary WHERE employee_id = @employee_id;  </span><br><span class="line">    SET @new_salary = @new_salary * 1.1; -- 增加10%薪资  </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>

<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">CREATE PROCEDURE sp_UpdateAccountBalance  </span><br><span class="line">    @account_number INT,  </span><br><span class="line">    @amount DECIMAL(10, 2),  </span><br><span class="line">    @transaction_type VARCHAR(50)  </span><br><span class="line">AS  </span><br><span class="line">BEGIN  </span><br><span class="line">    BEGIN TRANSACTION; -- 开启事务  </span><br><span class="line">    </span><br><span class="line">    -- 更新客户账户余额  </span><br><span class="line">    UPDATE Account SET balance = balance + @amount WHERE account_number = @account_number;  </span><br><span class="line">    </span><br><span class="line">    -- 记录交易日志  </span><br><span class="line">    INSERT INTO TransactionLog (account_number, transaction_type, amount, transaction_date)   </span><br><span class="line">    VALUES (@account_number, @transaction_type, @amount, GETDATE());  </span><br><span class="line">    </span><br><span class="line">    -- 检查是否余额为负，如果为负则回滚事务  </span><br><span class="line">    IF (SELECT balance FROM Account WHERE account_number = @account_number) &lt; 0  </span><br><span class="line">    BEGIN  </span><br><span class="line">        ROLLBACK; -- 回滚事务  </span><br><span class="line">        RAISERROR(&#x27;Insufficient funds to complete transaction.&#x27;, 16, 1); -- 抛出错误消息</span><br><span class="line">        RETURN -1; -- 返回 -1 表示余额不足</span><br><span class="line">    END  </span><br><span class="line">    ELSE  </span><br><span class="line">    BEGIN  </span><br><span class="line">        COMMIT; -- 提交事务</span><br><span class="line">        RETURN 0; -- 返回 0 表示成功  </span><br><span class="line">    END  </span><br><span class="line">END;</span><br></pre></td></tr></table></figure>

<h4 id="调用存储过程"><a href="#调用存储过程" class="headerlink" title="调用存储过程"></a>调用存储过程</h4><p>使用 <code>EXEC</code> 或 <code>EXECUTE</code> 关键字来执行该存储过程并传递参数</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-- 假设要更新账户号为12345的客户账户余额，金额为100，交易类型为&#x27;Deposit&#x27;  </span><br><span class="line">DECLARE @result INT;  -- 使用 DECLARE @result INT; 声明一个 INT 类型的变量，接受返回值</span><br><span class="line">EXEC @result = sp_UpdateAccountBalance @account_number = 12345, @amount = 100.00, @transaction_type = &#x27;Deposit&#x27;;  </span><br><span class="line">SELECT @result; -- 显示存储过程的返回值</span><br></pre></td></tr></table></figure>

</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MySQL/">MySQL</a><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/08/25/html5-css3/" title="Html5+css3"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://tse4-mm.cn.bing.net/th/id/OIP-C.M-x3IL5Qc2hipyXZBeazbQHaDt?w=328&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Html5+css3</div></div></a></div><div class="next-post pull-right"><a href="/2022/09/07/javaScript%E7%AC%AC%E4%B8%80%E7%AB%A0/" title="javaScript第一章"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://tse3-mm.cn.bing.net/th/id/OIP-C.kicojpcD6RPFCjEsEmD8ugHaHa?w=180&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">javaScript第一章</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2025/01/14/SQLite/" title="SQLite"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2025-01-14</div><div class="title">SQLite</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/fafafa.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">fafafa</div><div class="author-info__description">记录笔记日志</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">55</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">36</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">46</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xxxxx" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="/fafafabaobei@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=728831102&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#SQL"><span class="toc-number">1.</span> <span class="toc-text">SQL</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93%E6%A6%82%E8%BF%B0"><span class="toc-number">1.1.</span> <span class="toc-text">关系数据库概述</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.1.1.</span> <span class="toc-text">数据模型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.1.2.</span> <span class="toc-text">数据类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E6%B5%81%E5%85%B3%E7%B3%BB%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.1.3.</span> <span class="toc-text">主流关系数据库</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MySQL"><span class="toc-number">1.2.</span> <span class="toc-text">MySQL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.2.1.</span> <span class="toc-text">概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MySQL%E5%AE%89%E8%A3%85"><span class="toc-number">1.2.2.</span> <span class="toc-text">MySQL安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8Docker%E8%BF%90%E8%A1%8CMySQL"><span class="toc-number">1.2.3.</span> <span class="toc-text">使用Docker运行MySQL</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.3.</span> <span class="toc-text">关系模型</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BB%E9%94%AE"><span class="toc-number">1.3.1.</span> <span class="toc-text">主键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%96%E9%94%AE"><span class="toc-number">1.3.2.</span> <span class="toc-text">外键</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95"><span class="toc-number">1.3.3.</span> <span class="toc-text">索引</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%93%8D%E4%BD%9C"><span class="toc-number">1.4.</span> <span class="toc-text">数据库操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.4.1.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%89%80%E6%9C%89%E6%95%B0%E6%8D%AE%E5%BA%93%E5%90%8D"><span class="toc-number">1.4.2.</span> <span class="toc-text">查看所有数据库名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.4.3.</span> <span class="toc-text">使用数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E6%95%B0%E6%8D%AE%E5%AF%BC%E5%85%A5%E5%AF%BC%E5%87%BA"><span class="toc-number">1.4.4.</span> <span class="toc-text">数据库数据导入导出</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.4.5.</span> <span class="toc-text">删除数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E6%93%8D%E4%BD%9C"><span class="toc-number">1.4.6.</span> <span class="toc-text">表操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E8%A1%A8"><span class="toc-number">1.4.7.</span> <span class="toc-text">创建数据表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E6%89%80%E6%9C%89%E7%9A%84%E8%A1%A8"><span class="toc-number">1.4.8.</span> <span class="toc-text">查看数据库中所有的表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.9.</span> <span class="toc-text">查看表结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E5%90%8D"><span class="toc-number">1.4.10.</span> <span class="toc-text">修改表名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">1.4.11.</span> <span class="toc-text">修改表结构</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E6%96%B0%E5%88%97"><span class="toc-number">1.4.11.1.</span> <span class="toc-text">添加新列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%A1%A8%E6%9F%90%E4%B8%80%E5%88%97%E7%9A%84%E5%B1%9E%E6%80%A7"><span class="toc-number">1.4.11.2.</span> <span class="toc-text">修改表某一列的属性</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%9F%90%E4%B8%80%E5%88%97"><span class="toc-number">1.4.11.3.</span> <span class="toc-text">删除某一列</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E4%B8%BB%E9%94%AE%E5%B9%B6%E4%BF%AE%E6%94%B9%E4%B8%BB%E9%94%AE"><span class="toc-number">1.4.11.4.</span> <span class="toc-text">删除主键并修改主键</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F"><span class="toc-number">1.4.11.5.</span> <span class="toc-text">添加外键约束</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%95%B0%E6%8D%AE"><span class="toc-number">1.5.</span> <span class="toc-text">查询数据</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.0.1.</span> <span class="toc-text">基本查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.0.2.</span> <span class="toc-text">条件查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E6%9F%A5%E8%AF%A2%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.5.0.3.</span> <span class="toc-text">条件查询关键字</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#IN%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.5.0.3.1.</span> <span class="toc-text">IN关键字</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#BETTEEN-ADN-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.5.0.3.2.</span> <span class="toc-text">BETTEEN ADN 关键字</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%A9%BA%E5%80%BC%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.0.3.3.</span> <span class="toc-text">空值查询</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#DISTINCT-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.5.0.3.4.</span> <span class="toc-text">DISTINCT 关键字</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#LIKE-%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.5.0.3.5.</span> <span class="toc-text">LIKE 关键字</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%99%BE%E5%88%86%E5%8F%B7-%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-number">1.5.0.3.6.</span> <span class="toc-text">百分号(%)通配符</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%B8%8B%E5%88%92%E7%BA%BF-%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-number">1.5.0.3.7.</span> <span class="toc-text">下划线(_)通配符</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#AND%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.5.0.3.8.</span> <span class="toc-text">AND关键字</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#OR%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-number">1.5.0.3.9.</span> <span class="toc-text">OR关键字</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8A%95%E5%BD%B1%E6%9F%A5%E8%AF%A2-%E8%BF%87%E6%BB%A4%E5%AD%97%E6%AE%B5"><span class="toc-number">1.5.0.4.</span> <span class="toc-text">投影查询 - 过滤字段</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%8E%92%E5%BA%8F"><span class="toc-number">1.5.0.5.</span> <span class="toc-text">排序</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%81%9A%E5%90%88%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.0.6.</span> <span class="toc-text">聚合查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E7%BB%84%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.0.7.</span> <span class="toc-text">分组查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E7%BB%93%E6%9E%9C%E5%8E%BB%E9%87%8D"><span class="toc-number">1.5.0.8.</span> <span class="toc-text">查询结果去重</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%86%E9%A1%B5%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.0.9.</span> <span class="toc-text">分页查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link"><span class="toc-number">1.5.0.10.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.0.11.</span> <span class="toc-text">多表查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.0.12.</span> <span class="toc-text">连接查询</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%90%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.5.0.13.</span> <span class="toc-text">子查询</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">1.6.</span> <span class="toc-text">修改数据</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">1.6.1.</span> <span class="toc-text">插入数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%95%B0%E6%8D%AE"><span class="toc-number">1.6.2.</span> <span class="toc-text">更新数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E6%95%B0%E6%8D%AE"><span class="toc-number">1.6.3.</span> <span class="toc-text">删除数据</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%B4%E6%97%B6%E8%A1%A8"><span class="toc-number">1.7.</span> <span class="toc-text">临时表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E4%B8%B4%E6%97%B6%E8%A1%A8"><span class="toc-number">1.7.1.</span> <span class="toc-text">创建临时表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A1%AB%E5%85%85%E4%B8%B4%E6%97%B6%E8%A1%A8"><span class="toc-number">1.7.2.</span> <span class="toc-text">填充临时表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E4%B8%B4%E6%97%B6%E8%A1%A8"><span class="toc-number">1.7.3.</span> <span class="toc-text">查询临时表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%B4%E6%97%B6%E8%A1%A8%E8%BF%9B%E8%A1%8C%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2"><span class="toc-number">1.7.4.</span> <span class="toc-text">使用临时表进行多表查询</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE"><span class="toc-number">1.8.</span> <span class="toc-text">视图</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE-%E5%8D%95%E8%A1%A8%E7%BB%93%E6%9E%9C"><span class="toc-number">1.8.1.</span> <span class="toc-text">创建视图 - 单表结果</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%A7%86%E5%9B%BE-%E5%A4%9A%E8%A1%A8%E7%BB%93%E6%9E%9C"><span class="toc-number">1.8.2.</span> <span class="toc-text">创建视图 - 多表结果</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E5%9B%BE%E5%92%8C%E4%B8%B4%E6%97%B6%E8%A1%A8%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.9.</span> <span class="toc-text">视图和临时表的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95-1"><span class="toc-number">1.10.</span> <span class="toc-text">索引</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.10.1.</span> <span class="toc-text">索引类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MySQL%E7%B4%A2%E5%BC%95%E5%8E%9F%E7%90%86"><span class="toc-number">1.10.2.</span> <span class="toc-text">MySQL索引原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MySQL%E7%B4%A2%E5%BC%95%E6%98%AF%E5%A6%82%E4%BD%95%E6%94%AF%E6%8C%81%E7%99%BE%E4%B8%87%E7%BA%A7%E5%88%AB%E6%9F%A5%E8%AF%A2%E7%9A%84"><span class="toc-number">1.10.3.</span> <span class="toc-text">MySQL索引是如何支持百万级别查询的</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%B4%A2%E5%BC%95%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.10.4.</span> <span class="toc-text">创建索引的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.10.5.</span> <span class="toc-text">使用场景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%B4%A2%E5%BC%95%E4%BD%BF%E7%94%A8%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.10.6.</span> <span class="toc-text">索引使用注意事项</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#MySQL%E7%B4%A2%E5%BC%95%E4%B8%BA%E4%BB%80%E4%B9%88%E4%B8%8D%E8%83%BD%E8%BF%87%E5%A4%9A%E4%B9%9F%E4%B8%8D%E8%83%BD%E5%A4%AA%E5%B0%91"><span class="toc-number">1.10.7.</span> <span class="toc-text">MySQL索引为什么不能过多也不能太少</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BC%98%E5%8C%96%E6%80%9D%E8%B7%AF"><span class="toc-number">1.10.8.</span> <span class="toc-text">数据库优化思路</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%85%A2%E6%9F%A5%E8%AF%A2%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96"><span class="toc-number">1.10.9.</span> <span class="toc-text">慢查询如何优化</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.11.</span> <span class="toc-text">事务</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BA%8B%E5%8A%A1%E5%85%B7%E6%9C%89ACID%E8%BF%994%E4%B8%AA%E7%89%B9%E6%80%A7"><span class="toc-number">1.11.1.</span> <span class="toc-text">数据库事务具有ACID这4个特性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.11.2.</span> <span class="toc-text">隐式事务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.11.3.</span> <span class="toc-text">显式事务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1"><span class="toc-number">1.11.4.</span> <span class="toc-text">什么是分布式事务</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%B8%83%E5%BC%8F%E8%8A%82%E7%82%B9%E7%9A%84%E6%8E%A5%E5%85%A5%E5%92%8C%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">1.11.5.</span> <span class="toc-text">分布式节点的接入和一致性</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.12.</span> <span class="toc-text">存储过程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%89%B9%E7%82%B9"><span class="toc-number">1.12.1.</span> <span class="toc-text">存储过程特点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.12.2.</span> <span class="toc-text">创建存储过程的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">1.12.3.</span> <span class="toc-text">使用存储过程的方法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E5%8F%82%E6%95%B0"><span class="toc-number">1.12.4.</span> <span class="toc-text">输入输出参数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B"><span class="toc-number">1.12.5.</span> <span class="toc-text">案例</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E5%AD%98%E5%82%A8%E8%BF%87%E7%A8%8B"><span class="toc-number">1.12.6.</span> <span class="toc-text">调用存储过程</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/01/14/SQLite/" title="SQLite"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SQLite"/></a><div class="content"><a class="title" href="/2025/01/14/SQLite/" title="SQLite">SQLite</a><time datetime="2025-01-13T16:52:36.000Z" title="发表于 2025-01-14 00:52:36">2025-01-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/29/xpath%E8%AF%AD%E6%B3%95/" title="Xpath语法"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Xpath语法"/></a><div class="content"><a class="title" href="/2024/09/29/xpath%E8%AF%AD%E6%B3%95/" title="Xpath语法">Xpath语法</a><time datetime="2024-09-29T15:57:28.000Z" title="发表于 2024-09-29 23:57:28">2024-09-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/26/playwright%E6%A1%86%E6%9E%B6/" title="Playwright框架"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Playwright框架"/></a><div class="content"><a class="title" href="/2024/09/26/playwright%E6%A1%86%E6%9E%B6/" title="Playwright框架">Playwright框架</a><time datetime="2024-09-26T14:29:59.000Z" title="发表于 2024-09-26 22:29:59">2024-09-26</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/21/pywinauto-WIN-PC%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96/" title="pywinauto_PC端自动化"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="pywinauto_PC端自动化"/></a><div class="content"><a class="title" href="/2024/09/21/pywinauto-WIN-PC%E7%AB%AF%E8%87%AA%E5%8A%A8%E5%8C%96/" title="pywinauto_PC端自动化">pywinauto_PC端自动化</a><time datetime="2024-09-21T02:35:00.000Z" title="发表于 2024-09-21 10:35:00">2024-09-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/12/pytest-hooks/" title="Pytest-Hooks"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Pytest-Hooks"/></a><div class="content"><a class="title" href="/2024/09/12/pytest-hooks/" title="Pytest-Hooks">Pytest-Hooks</a><time datetime="2024-09-12T07:38:15.000Z" title="发表于 2024-09-12 15:38:15">2024-09-12</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://tse2-mm.cn.bing.net/th/id/OIP-C._CBgHuOEl_liF7Z8_H9yKAHaEo?w=262&amp;h=180&amp;c=7&amp;r=0&amp;o=5&amp;dpr=1.3&amp;pid=1.7')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2025 By fafafa</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.14.0-b3"></script><script src="/js/main.js?v=4.14.0-b3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.0.5/dist/lazyload.iife.min.js"></script><script>(() => {
  const panguFn = () => {
    if (typeof pangu === 'object') pangu.autoSpacingPage()
    else {
      btf.getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
        .then(() => {
          pangu.autoSpacingPage()
        })
    }
  }

  const panguInit = () => {
    if (false){
      GLOBAL_CONFIG_SITE.isPost && panguFn()
    } else {
      panguFn()
    }
  }

  btf.addGlobalFn('pjaxComplete', panguInit, 'pangu')
  document.addEventListener('DOMContentLoaded', panguInit)
})()</script><div class="js-pjax"><script>(() => {
  const runMermaid = (ele) => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from(ele).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return
    
    codeMermaidEle.forEach(ele => {
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.innerHTML = `<pre class="mermaid-src" hidden>${ele.textContent}</pre>`
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js').then(runMermaidFn)
  }
  
  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.14.0-b3"></script></div></div></body></html>