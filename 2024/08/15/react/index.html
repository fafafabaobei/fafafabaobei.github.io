<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>React | fafafabaobei</title><meta name="author" content="fafafa"><meta name="copyright" content="fafafa"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="React项目基础 创建项目  使用官方脚手架 通过npm create-react-app  能创建一个基本的react项目 只做了react基本的搭建和构建，没有配上任何路由和状态管理。项目使用webpack构建  使用一些市场上的集成脚手架 官方脚手架提供的项目模板非常简单，因此也有很多集成的脚手架 典型的比如umi。这一类脚手架创建出来的项目会集成好多功能，比如路由、mock    核心库">
<meta property="og:type" content="article">
<meta property="og:title" content="React">
<meta property="og:url" content="https://fafafabaobei.github.io/2024/08/15/react/index.html">
<meta property="og:site_name" content="fafafabaobei">
<meta property="og:description" content="React项目基础 创建项目  使用官方脚手架 通过npm create-react-app  能创建一个基本的react项目 只做了react基本的搭建和构建，没有配上任何路由和状态管理。项目使用webpack构建  使用一些市场上的集成脚手架 官方脚手架提供的项目模板非常简单，因此也有很多集成的脚手架 典型的比如umi。这一类脚手架创建出来的项目会集成好多功能，比如路由、mock    核心库">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg">
<meta property="article:published_time" content="2024-08-15T04:23:23.000Z">
<meta property="article:modified_time" content="2024-08-15T04:23:23.000Z">
<meta property="article:author" content="fafafa">
<meta property="article:tag" content="前端">
<meta property="article:tag" content="react">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><link rel="shortcut icon" href="/img/blog.png"><link rel="canonical" href="https://fafafabaobei.github.io/2024/08/15/react/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><meta/><link rel="stylesheet" href="/css/index.css?v=4.14.0-b3"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>(()=>{
      const saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
      
      window.btf = {
        saveToLocal: saveToLocal,
        getScript: (url, attr = {}) => new Promise((resolve, reject) => {
          const script = document.createElement('script')
          script.src = url
          script.async = true
          script.onerror = reject
          script.onload = script.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            script.onload = script.onreadystatechange = null
            resolve()
          }

          Object.keys(attr).forEach(key => {
            script.setAttribute(key, attr[key])
          })

          document.head.appendChild(script)
        }),

        getCSS: (url, id = false) => new Promise((resolve, reject) => {
          const link = document.createElement('link')
          link.rel = 'stylesheet'
          link.href = url
          if (id) link.id = id
          link.onerror = reject
          link.onload = link.onreadystatechange = function() {
            const loadState = this.readyState
            if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
            link.onload = link.onreadystatechange = null
            resolve()
          }
          document.head.appendChild(link)
        }),

        addGlobalFn: (key, fn, name = false, parent = window) => {
          const pjaxEnable = false
          if (!pjaxEnable && key.startsWith('pjax')) return

          const globalFn = parent.globalFn || {}
          const keyObj = globalFn[key] || {}
    
          if (name && keyObj[name]) return
    
          name = name || Object.keys(keyObj).length
          keyObj[name] = fn
          globalFn[key] = keyObj
          parent.globalFn = globalFn
        }
      }
    
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode
      
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })()</script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":true,"highlightMacStyle":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: true,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'React',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-08-15 12:23:23'
}</script><meta name="generator" content="Hexo 7.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><script>(()=>{
  const $loadingBox = document.getElementById('loading-box')
  const $body = document.body
  const preloader = {
    endLoading: () => {
      $body.style.overflow = ''
      $loadingBox.classList.add('loaded')
    },
    initLoading: () => {
      $body.style.overflow = 'hidden'
      $loadingBox.classList.remove('loaded')
    }
  }

  preloader.initLoading()
  window.addEventListener('load',() => { preloader.endLoading() })

  if (false) {
    btf.addGlobalFn('pjaxSend', () => { preloader.initLoading() }, 'preloader_init')
    btf.addGlobalFn('pjaxComplete', () => { preloader.endLoading() }, 'preloader_end')
  }
})()</script><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/fafafa.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">64</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">42</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">52</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><nav id="nav"><span id="blog-info"><a href="/" title="fafafabaobei"><img class="site-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/blog.png" alt="Logo"/><span class="site-name">fafafabaobei</span></a></span><div id="menus"><div id="search-button"><span class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></span></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> 其他</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于我</span></a></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">React<a class="post-edit-link" href="null_posts/react.md" title="编辑" target="_blank"><i class="fas fa-pencil-alt"></i></a></h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2024-08-15T04:23:23.000Z" title="发表于 2024-08-15 12:23:23">2024-08-15</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-08-15T04:23:23.000Z" title="更新于 2024-08-15 12:23:23">2024-08-15</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/">前端</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF/react/">react</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">9k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>40分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="React"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h3 id="React"><a href="#React" class="headerlink" title="React"></a>React</h3><h4 id="项目基础"><a href="#项目基础" class="headerlink" title="项目基础"></a>项目基础</h4><ol>
<li><p>创建项目</p>
<ul>
<li><p>使用官方脚手架</p>
<p>通过npm create-react-app <projectName> 能创建一个基本的react项目</projectName></p>
<p>只做了react基本的搭建和构建，没有配上任何路由和状态管理。项目使用webpack构建</p>
</li>
<li><p>使用一些市场上的集成脚手架</p>
<p>官方脚手架提供的项目模板非常简单，因此也有很多集成的脚手架</p>
<p>典型的比如umi。这一类脚手架创建出来的项目会集成好多功能，比如路由、mock</p>
</li>
</ul>
</li>
<li><p>核心库</p>
<ul>
<li>react 	react核心库，提供react的个个功能</li>
<li>React-dom     提供一些dom操作方法用于把react创建出来的react对象挂载到真正的htmlDom中，或者从htmlDom中卸载。核心作用类似于vue的mount</li>
</ul>
</li>
</ol>
<h4 id="项目入口文件"><a href="#项目入口文件" class="headerlink" title="项目入口文件"></a>项目入口文件</h4><ul>
<li><p>index.js</p>
<p>通过ReactDOM的createRoot方法创建ReactDOMRoot实例，通过render函数进行根组件渲染</p>
</li>
<li><p>React.StrictMode - 是React的严格模式</p>
<p>可以进行组件的功能审查</p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/%E7%B1%BB%E7%BB%84%E4%BB%B6.png" alt="image-20240706005130473"></p>
<h4 id="App根组件"><a href="#App根组件" class="headerlink" title="App根组件"></a>App根组件</h4><p>​	React 组件就是一个函数形式，React函数组件是从React 16.8版本开始引入的</p>
<p>​	!!! jsx 只能返回一个根元素</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6.png" alt="image-20240706005929613"></p>
<h4 id="jsx-插值表达式"><a href="#jsx-插值表达式" class="headerlink" title="jsx 插值表达式"></a>jsx 插值表达式</h4><p>​	jsx是javascript跟html结合的语法</p>
<p>​	使用 {} </p>
<ul>
<li>使用jsx语法渲染html属性</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">function App()&#123;</span><br><span class="line">    // 可以将img标签非必须得属性提取出来写</span><br><span class="line">    const imgData = &#123;</span><br><span class="line">        className: &#x27;small&#x27;,</span><br><span class="line">        style: &#123;</span><br><span class="line">            width: 200,</span><br><span class="line">            height: 200,</span><br><span class="line">            backgroundColor: &#x27;red&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return (</span><br><span class="line">    	&lt;div&gt;</span><br><span class="line">            &lt;!-- 这里不是展开运算符， 是jsx的插值表达式 --&gt;</span><br><span class="line">        	&lt;img src=&quot;./logo.svg&quot; alt=&quot;&quot; &#123;...imageData&#125;&gt;&lt;/img&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">    /*</span><br><span class="line">     展开运算符是需要一个对象自变量进行接受的，直接&#123;...imageData&#125;在js语法中是会报错</span><br><span class="line">    */</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="Fragment"><a href="#Fragment" class="headerlink" title="Fragment"></a>Fragment</h4><p>​	当渲染的标签需要在标签上添加属性便不能在使用幽灵标签 - 而使用Fragment</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Fragment &#125; from &quot;react&quot;</span><br><span class="line"></span><br><span class="line">function App()&#123;</span><br><span class="line">    const list = &#123;</span><br><span class="line">        &#123;id:1, name: &#x27;小张&#x27;&#125;,</span><br><span class="line">        &#123;id:2, name: &#x27;小光&#x27;&#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	const listContent = list.map(item =&gt;&#123;</span><br><span class="line">        &lt;Fragment key=&#123;item.id&#125;&gt;</span><br><span class="line">            &lt;li&gt;&#123;item.name&#125;&lt;/li&gt;</span><br><span class="line">            &lt;span&gt;yyds&lt;/span&gt;</span><br><span class="line">        &lt;/Fragment&gt;</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    return (</span><br><span class="line">    	&lt;ul&gt;&#123;listContent&#125;&lt;/ul&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>





<h4 id="React组件和jsx"><a href="#React组件和jsx" class="headerlink" title="React组件和jsx"></a>React组件和jsx</h4><ol>
<li><p>React 组件分类</p>
<ul>
<li>函数组件( 首字母大写) ( 新版本)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function Hello() &#123;</span><br><span class="line">    return &lt;div&gt;hello&lt;/div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>class 类组件( 首字母大写)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">class Hello extends React.Component &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return &lt;div&gt;hello&lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>通过React.createElement() 创建组件，与vue类似( 首字母大写)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">function Hello()&#123;</span><br><span class="line">    return React.createElement(&#x27;div&#x27;,[],&quot;hello,word&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>todo 组件 (容器组件)</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">   </span><br></pre></td></tr></table></figure>


</li>
<li><p>jsx 特点</p>
<ul>
<li><p>直接在js中混用</p>
<p>React项目利用babel做了对js的编译，所以我们是可以直接在js里面写jsx的</p>
</li>
<li><p>写法接近js</p>
<p>jsx几乎和js一样，不同点在于，可以更方便的写html在js里，写在js里面的html最终会被编译成一个js对象，我们也可以用react自带的createElement创建这个对象</p>
</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/reactElement.png" alt="image-20240614133209493"></p>
<ul>
<li>jsx里面渲染不同内容的区别<ul>
<li>字符串；数组： 直接渲染</li>
<li>方法：无法渲染</li>
<li>对象：只能渲染element</li>
<li>布尔值：不渲染任何内容</li>
<li>数组：把数组里面的每一项单独渲染</li>
<li>undefine、null：不渲染任何内容</li>
<li>表达式：运行表达式</li>
</ul>
</li>
</ul>
<h4 id="react事件绑定"><a href="#react事件绑定" class="headerlink" title="react事件绑定"></a>react事件绑定</h4><ol>
<li><p>规则模式</p>
<ul>
<li>类似于原生，on+方法名( 首字母大写)</li>
<li>一定要赋值给事件一个方法</li>
</ul>
<p>注意：</p>
<ul>
<li>不做处理的情况下，this会指向undefind</li>
<li>给到事件绑定的一定得是一个方法，不要直接调用方法，调用方法只会在页面初次与渲染指向方法( 与vue不同)</li>
</ul>
</li>
<li><p>事件绑定的其他操作</p>
<ul>
<li>传递参数</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div onClick=&#123; this.f1.bind(this, 1, 2)&#125;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>获取事件对象</li>
</ul>
<p>当没有传递任何参数时，事件对象就是第一个参数；传递参数时，事件对象就是最后一个参数</p>
<p> 该事件对象是合成的事件对象，并非原生事件对象，原生事件对象在e.nativeEvent</p>
<ul>
<li>阻止默认行为，冒泡等</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">e.stopPropagation()</span><br><span class="line">e.preventDefault()</span><br></pre></td></tr></table></figure></li>
</ol>
<p>​	3.使用了类组件可以在类初始化函数内进行 this.f1.bind() 的操作，这样就可以直接使用 this.f1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">// ./Event.tsx</span><br><span class="line">import &#123; Button, Space&#125; from &#x27;antd&#x27; // 使用antd UI组件库</span><br><span class="line">import React, &#123;Component&#125; from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">export default class Event extends Component &#123;</span><br><span class="line">    // 类初始化 - constructor</span><br><span class="line">    constructor(porps:any)&#123;</span><br><span class="line">        super(porps)</span><br><span class="line">        // 此处先修改了this指向，后续onClick内直接调用函数即可</span><br><span class="line">        this.click1 = this.click1.bind(this)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    click1() &#123;</span><br><span class="line">        console.log(&#x27;click1&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    click2 = ()=&gt;&#123;</span><br><span class="line">        console.log(&#x27;click2&#x27;)</span><br><span class="line">    &#125;</span><br><span class="line">    click3(str:string) &#123;</span><br><span class="line">        console.log(str)</span><br><span class="line">    &#125;</span><br><span class="line">    click4 = (str:string)=&gt;&#123;</span><br><span class="line">        console.log(str)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">        	&lt;div&gt;</span><br><span class="line">            	&lt;Space&gt;</span><br><span class="line">                	&lt;Button type=&#x27;primary&#x27; onClick=&#123;this.click1&#125;&gt;click1&lt;/Button&gt;</span><br><span class="line">                	&lt;Button type=&#x27;primary&#x27; onClick=&#123;this.click2&#125;&gt;click2&lt;/Button&gt;</span><br><span class="line">                    &lt;Button type=&#x27;primary&#x27; onClick=&#123;this.click3.bind(this, &#x27;click3&#x27;)&#125;&gt;click2&lt;/Button&gt;</span><br><span class="line">                    &lt;Button type=&#x27;primary&#x27; onClick=&#123;this.click4.bind(this, &#x27;click4&#x27;)&#125;&gt;click2&lt;/Button&gt;</span><br><span class="line">                    &lt;Button type=&#x27;primary&#x27; onClick=&#123;()=&gt;&#123;this.click4(&#x27;click4&#x27;)&#125;&#125;&gt;click2&lt;/Button&gt;</span><br><span class="line">                &lt;/Space&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="react-组件中的响应式数据"><a href="#react-组件中的响应式数据" class="headerlink" title="react 组件中的响应式数据"></a>react 组件中的响应式数据</h4><p>​	在 React 中，如果不定义响应式数据，视图就不会自动更新。React 是通过比较虚拟 DOM 树的差异来决定何时重新渲染组件的。而为了触发视图更新，你需要显式地调用 <code>setState</code> 方法来更改组件的状态。</p>
<pre><code> 1. react 响应式原理
  * react不能像vue一样直接修改触发更新
  * react修改能改的值，但无法触发更新，因为react没有像vue一样监听get和set，而是在调用setState的时候调用react的更新操作
</code></pre>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">class App extends React.Component &#123;</span><br><span class="line">    // 响应式数据</span><br><span class="line">    state = &#123;</span><br><span class="line">        a:0</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    addA = ()=&gt;&#123;</span><br><span class="line">        // 调用setState 执行页面更新操作</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            a: ++this.state.a</span><br><span class="line">        &#125;)</span><br><span class="line">        // 或者在外头操作，然后只是单纯的调用setState方法，触发更新</span><br><span class="line">        this.state.a += 1;</span><br><span class="line">        this.setState(&#123;&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render()&#123;</span><br><span class="line">        return &lt;div className=&#x27;App&#x27;&gt;</span><br><span class="line">        	&#123;this.state.a&#125;</span><br><span class="line">            &lt;button onClick=&#123;this.addA&#125;&gt; +1 &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>setState工作流程</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/setState.png" alt="image-20240614171135240"></p>
<p>关键点：</p>
<ul>
<li>通过浅合并来修改数据</li>
<li>调用setState方法会触发更新，修改state并不会触发更新</li>
<li>在修改对象属性的时候需要将数据写全，不然会覆盖；可以先将原对象展开，在赋值</li>
<li>setState修改变量操作是异步的，需要获取到修改后的数据需要在第二个参数下获取</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">class App extends React.Component &#123;</span><br><span class="line">    // 响应式数据</span><br><span class="line">    state = &#123;</span><br><span class="line">        a:0</span><br><span class="line">    &#125;</span><br><span class="line">  </span><br><span class="line">    addA = ()=&gt;&#123;</span><br><span class="line">        // 调用setState 执行页面更新操作</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            a: ++this.state.a</span><br><span class="line">        &#125;,()=&gt;&#123;</span><br><span class="line">            // 在这里获取最新数据</span><br><span class="line">            console.log(this.state.a)</span><br><span class="line">        &#125;)</span><br><span class="line">        // 或者在外头操作，然后只是单纯的调用setState方法，触发更新</span><br><span class="line">        this.state.a += 1;</span><br><span class="line">        this.setState(&#123;&#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render()&#123;</span><br><span class="line">        return &lt;div className=&#x27;App&#x27;&gt;</span><br><span class="line">        	&#123;this.state.a&#125;</span><br><span class="line">            &lt;button onClick=&#123;this.addA&#125;&gt; +1 &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>setState方法多次修改，会合并为一次，统一更新</li>
<li>setState返回触发更新，不管你是否修改，这就造成了一个新问题，重复修改相同的值也会让组件进行更新</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 解决方法</span><br><span class="line">可以使用 React.PureComponent</span><br><span class="line"></span><br><span class="line">// 缺点</span><br><span class="line">当使用React.PureComponent的时候</span><br><span class="line">如果修改的是数组和对象,就对导致页面没有更新</span><br><span class="line">因为数组和对象的判断是否改变是判断内存地址是否改变</span><br><span class="line">// 解决方法   解除引用，重新赋值新数组或对象</span><br><span class="line">this.setState(&#123;</span><br><span class="line">    arr:[ ...this.state.arr],</span><br><span class="line">    object: &#123; ...this.state.object&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li>一定不要在render里直接使用setState ( 在React.Component 下会触发死循环)</li>
</ul>
<ol start="2">
<li><p>如果不使用响应式数据（例如使用 useState [setState的hock] 或 useReducer），但是需要手动触发更新视图，可以使用 forceUpdate 方法</p>
<p>forceUpdate 是 React 组件的内置方法。它用于强制组件重新渲染并更新视图。然而，官方文档建议尽量避免使用 forceUpdate，因为它会跳过 React 的优化流程，并可能导致性能问题。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">/* 函数式组件 */</span><br><span class="line">import React, &#123; useRef &#125; from &#x27;react&#x27;;</span><br><span class="line"></span><br><span class="line">function MyComponent() &#123;</span><br><span class="line">  //使用了 useRef 来创建一个非响应式的引用变量 countRef</span><br><span class="line">  const countRef = useRef(0);</span><br><span class="line"></span><br><span class="line">  function handleClick() &#123;</span><br><span class="line">    countRef.current += 1; // 更新计数值</span><br><span class="line">    component.forceUpdate(); // 强制组件重新渲染</span><br><span class="line">    //在实际开发中，除非特殊情况下需要手动操作更新视图，一般不建议频繁地使用 forceUpdate 方法。</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  return (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;Count: &#123;countRef.current&#125;&lt;/p&gt;</span><br><span class="line">      &lt;button onClick=&#123;handleClick&#125;&gt;Increment&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 类组件 */</span><br><span class="line">class MyComponent extends React.Component &#123;</span><br><span class="line">  handleClick() &#123;</span><br><span class="line">    // 在事件处理程序中调用 forceUpdate()</span><br><span class="line">    this.forceUpdate();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    // 在生命周期方法中调用 forceUpdate()</span><br><span class="line">    this.forceUpdate();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    // 组件的渲染逻辑</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;button onClick=&#123;this.handleClick.bind(this)&#125;&gt;强制更新&lt;/button&gt;</span><br><span class="line">        &#123;/* ... */&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="React-条件渲染和列表循环"><a href="#React-条件渲染和列表循环" class="headerlink" title="React 条件渲染和列表循环"></a>React 条件渲染和列表循环</h4><h5 id="条件循环"><a href="#条件循环" class="headerlink" title="条件循环"></a>条件循环</h5><ol>
<li><p>react 没有像vue一样的指令，一切操作本质上都是我们通过运算生成不同的内容，拿去渲染，得到不同页面</p>
</li>
<li><p>条件渲染本质</p>
<p>原则：</p>
<ul>
<li>react 渲染undefined，null，空字符串，false不会渲染成任何内容</li>
<li>如果渲染一个jsx编写的html元素，就会渲染成页面上的内容</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93.png" alt="image-20240614184524074"></p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"> </span><br><span class="line">class App extends React.PureComponect &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        show: true</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    function Hello() &#123;</span><br><span class="line">    	return &lt;div&gt;hello&lt;/div&gt;</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    f1()&#123;</span><br><span class="line">        if(this.state.show) &#123;</span><br><span class="line">            return &lt;div&gt;hello&lt;/div&gt;</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return &quot;&quot;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    render()&#123;</span><br><span class="line">        return &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">        	&lt;div&gt;条件渲染&lt;/div&gt;</span><br><span class="line">            // 三元运算符</span><br><span class="line">            &lt;div&gt;&#123;this.state.show ? &lt;Hello/&gt; : &quot;&quot;&#125;&lt;/div&gt;</span><br><span class="line">            // 与运算符 当this.state.show 为false时，不会向后执行</span><br><span class="line">            &lt;div&gt;&#123;this.state.show &amp;&amp; &lt;Hello/&gt;&#125;&lt;/div&gt;</span><br><span class="line">            // 使用函数判断</span><br><span class="line">            &lt;div&gt;&#123;this.f1()&#125;&lt;/div&gt;</span><br><span class="line">            &lt;button onClink=&#123;()=&gt;&#123;this.setState(&#123;show: !this.state.show&#125;)&#125;)&#125;&gt;&#123;this.state.show ? &quot;隐藏&quot; : &quot;显示&quot;&#125;&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="列表循环"><a href="#列表循环" class="headerlink" title="列表循环"></a>列表循环</h5><p>​	原则：</p>
<ul>
<li>渲染一个数组会把数组里的灭意向单独取出渲染</li>
<li>那么我们编写一个里面存放的都是html结构的数组，就会渲染成列表</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/%E5%88%97%E8%A1%A8%E5%BE%AA%E7%8E%AF.png" alt="image-20240614191840245"></p>
  <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"> </span><br><span class="line">class App extends React.PureComponect &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        array_1: [1,2,3] // [1,2,3] =&gt; [&lt;div&gt;1&lt;/div&gt;, &lt;div&gt;2&lt;/div&gt;, &lt;div&gt;3&lt;/div&gt;]</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    getArr()&#123;</span><br><span class="line">        return this.state.array_1.map((item) =&gt;&#123;</span><br><span class="line">            &lt;div key=&#123;item&#125;&gt;&#123;item&#125;&lt;/div&gt;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render()&#123;</span><br><span class="line">        </span><br><span class="line">        &#123;this.getArr()&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="react的思想"><a href="#react的思想" class="headerlink" title="react的思想"></a>react的思想</h5><ol>
<li>更少的封装，更高的自由度，能够让使用者更加高度的去自定义实现，不想vue一样必须遵守许多规则</li>
<li>纯粹的js，没有什么特殊的指令</li>
</ol>
<h4 id="表单绑定"><a href="#表单绑定" class="headerlink" title="表单绑定"></a>表单绑定</h4><ol>
<li>基本思路<ul>
<li>react中很多思路都是按照原生的操作去做的，表单绑定也是如此</li>
<li>原生表单获取表单输入值，我们可以通过监听input，change等事件，然后获取e.target.value</li>
<li>如果要设置表单的值，通常设置value属性，如果选择框是checked属性</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// input 双向数据绑定</span><br><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"> </span><br><span class="line">class App extends React.PureComponect &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        inputValue : &quot;&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    changeInput(e)&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">        	inputValue: &#123;this.state.inputValue&#125;</span><br><span class="line">            &lt;input type=&quot;text&quot; value=&#123;this.state.inputValue&#125; onInput=&#123;(e)=&#123;</span><br><span class="line">                    this.setState(&#123;</span><br><span class="line">                    	inputValue: e.target.value</span><br><span class="line">                	&#125;)</span><br><span class="line">                &#125;&#125; /&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>受控组件( 双向监听)</p>
<p>表单值可以由使用者手动去设置，也就是进行了双向绑定。我们可以修改state 数据从而影响到表单</p>
</li>
<li><p>非受控组件( 单向监听)</p>
<p>表单的值由自己维护。我们只能获取表单的值，不能直接修改state 数据来修改表单值。</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">// checkbox 复选框 双向数据</span><br><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">class App extends React.PureComponect &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        checkboxArr : []</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    handleChecked = ()=&gt;&#123;</span><br><span class="line">        let arr = [...this.state.checkedArr]</span><br><span class="line">        if(e.target.checked)&#123;</span><br><span class="line">            arr.push(e.target.value)</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            arr.splice(arr.indexOf(e.target.value),1)</span><br><span class="line">        &#125;</span><br><span class="line">        this.setState(&#123;</span><br><span class="line">            checkedArr: arr</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        return &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">        	&#123;this.state.checkboxArr&#125;</span><br><span class="line">            &lt;input </span><br><span class="line">                onChange=&#123;this.handleChecked&#125;</span><br><span class="line">                checked=&#123;this.state.checkedArr.indexOf(&quot;c1&quot;) !== -1&#125;</span><br><span class="line">                value=&quot;c1&quot;</span><br><span class="line">                type=&quot;checkbox&quot;</span><br><span class="line">                name=&quot;choose&quot;</span><br><span class="line">            /&gt;选项一</span><br><span class="line">            &lt;input </span><br><span class="line">                onChange=&#123;this.handleChecked&#125;</span><br><span class="line">                checked=&#123;this.state.checkedArr.indexOf(&quot;c2&quot;) !== -1&#125;</span><br><span class="line">                value=&quot;c21&quot;</span><br><span class="line">                type=&quot;checkbox&quot;</span><br><span class="line">                name=&quot;choose&quot;</span><br><span class="line">            /&gt;选项二</span><br><span class="line">            &lt;input </span><br><span class="line">                onChange=&#123;this.handleChecked&#125;</span><br><span class="line">                checked=&#123;this.state.checkedArr.indexOf(&quot;c3&quot;) !== -1&#125;</span><br><span class="line">                value=&quot;c3&quot;</span><br><span class="line">                type=&quot;checkbox&quot;</span><br><span class="line">                name=&quot;choose&quot;</span><br><span class="line">            /&gt;选项三</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h4 id="Prop和组件通信、插槽"><a href="#Prop和组件通信、插槽" class="headerlink" title="Prop和组件通信、插槽"></a>Prop和组件通信、插槽</h4><ol>
<li><p>props是react的核心</p>
<p>在react中，一切写在组件上的属性和子节点都被规划为了props。所以props是react很多功能的根本。父子传值，插槽全是基于props，不像vue又事件监听，emit，专门的插槽这一类东西</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// Son.js</span><br><span class="line">import React from &quot;react&quot;</span><br><span class="line"></span><br><span class="line">class Son extends React.PureComponent &#123;</span><br><span class="line">	render() &#123;</span><br><span class="line">        // 通过this.porps 获取父组件传给子组件的值</span><br><span class="line">        return &lt;div&gt;</span><br><span class="line">        	&#123;this.porps.message&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default Son;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// App.js</span><br><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import Son from &#x27;./Son.js&#x27;</span><br><span class="line"></span><br><span class="line">class App extends React.PureComponect &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        msg: &quot;父组件给子组件传值&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        return &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">        	&lt;Son message=&#123;this.state.msg&#125;&gt;&lt;/Son&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>函数式写法</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// 子组件可以接受到props, 或者&#123;title, content&#125; 解构</span><br><span class="line">function Artitle(props)&#123;</span><br><span class="line">    return (</span><br><span class="line">    	&lt;div&gt;</span><br><span class="line">        	&lt;h2&gt;&#123;porps.title&#125;&lt;/h2&gt;</span><br><span class="line">            &lt;p&gt;&#123;props.content&#125;&lt;/p&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default function App()&#123;</span><br><span class="line">    return (</span><br><span class="line">    	&lt;&gt;</span><br><span class="line">        	&lt;Artitle title=&quot;标题&quot; content=&quot;内容&quot;/&gt;</span><br><span class="line">        &lt;/&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol start="2">
<li>props 类型验证和默认值 - defineProps</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/props.png" alt="image-20240615145443001"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// Son.js</span><br><span class="line">import React from &quot;react&quot;</span><br><span class="line"></span><br><span class="line">class Son extends React.PureComponent &#123;</span><br><span class="line">	render() &#123;</span><br><span class="line">        // 通过this.porps 获取父组件传给子组件的值</span><br><span class="line">        return &lt;div&gt;</span><br><span class="line">        	&#123;this.porps.message&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">// 传值类型判断  第三库proptypes</span><br><span class="line">Son.propTypes = &#123;</span><br><span class="line">    // 必须自定义函数判断类型，不能像vue一样写类型</span><br><span class="line">    message: funciton(props)&#123;</span><br><span class="line">    	if (typeof props.message !== &quot;string&quot;)&#123;</span><br><span class="line">            throw new Error(&quot;message must be a string&quot;)</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;,</span><br><span class="line">&#125;</span><br><span class="line">// 默认值设置</span><br><span class="line">Son.defaultProps = &#123;</span><br><span class="line">    massage: &quot;message is undefind&quot;,</span><br><span class="line">&#125;</span><br><span class="line">export default Son;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>模拟Vue中的插槽</p>
<p>插槽本质上就是给子组件的html内容由父组件传入，jsx的加持下，我们可以把html像普通的字符串，数组一样传递，所以插槽只需要直接作为props传入就可以，内容放在了children下( 函数式方法一样)</p>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/props%E4%BC%A0%E5%80%BC.png" alt="image-20240615150837146"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// Son.js</span><br><span class="line">import React from &quot;react&quot;</span><br><span class="line"></span><br><span class="line">class Son extends React.PureComponent &#123;</span><br><span class="line">    state =&#123;</span><br><span class="line">        scoptValue : &quot;SonValue&quot;</span><br><span class="line">    &#125;</span><br><span class="line">	render() &#123;</span><br><span class="line">        // 父组件会将插槽内容通过porps的children 数组中存放，直接渲染即可</span><br><span class="line">        return &lt;div&gt;</span><br><span class="line">            &lt;!-- 普通插槽 默认名字为children --&gt;</span><br><span class="line">        	&#123;this.porps.children&#125;</span><br><span class="line">            &lt;!-- 具名插槽 --&gt;</span><br><span class="line">            &#123;this.props.SonName01&#125;</span><br><span class="line">            &lt;!-- 作用域插槽 利用父组件传的组件调用子组件的值 --&gt;</span><br><span class="line">            &#123;this.props.scopeSlot(this.state.scoptValue)&#125;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default Son;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// App.js</span><br><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import Son from &#x27;./Son.js&#x27;</span><br><span class="line"></span><br><span class="line">class App extends React.PureComponect &#123;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        return &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">            &lt;!-- 普通插槽 默认名字为children --&gt;</span><br><span class="line">        	&lt;Son&gt;</span><br><span class="line">                &lt;div&gt;给子组件的插槽内容&lt;/div&gt;</span><br><span class="line">            &lt;/Son&gt;</span><br><span class="line">            &lt;!-- 具名插槽 --&gt;</span><br><span class="line">            &lt;Son SonName01=&#123;&lt;div&gt;给子组件的插槽内容&lt;/div&gt;&#125;&gt;&lt;/Son&gt;</span><br><span class="line">            &lt;!-- 作用域插槽 --&gt;</span><br><span class="line">            &lt;!-- 父组件传递的插槽只能使用父组件的数据，如果需要用到子组件内的数据就可以用作用域插槽 --&gt;</span><br><span class="line">            &lt;Son scopeSlot=&#123;(scope)=&gt;&#123; return &lt;div&gt;&#123;scope&#125;&lt;/div&gt;&#125;&#125;&gt;&lt;/Son&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>父组件给子组件传值</li>
</ol>
<p>​		props不能直接修改父组件传递过来的值( vue同意)，我们需要通过子组件触发父组件事件，从而改变父组件的值，达到一个传递值的效果</p>
<p>![image-20240616152015968](.&#x2F;react&#x2F;props传值 (2).png)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// App.js</span><br><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import Son from &#x27;./Son.js&#x27;</span><br><span class="line"></span><br><span class="line">class App extends React.PureComponect &#123;</span><br><span class="line">    state &#123;</span><br><span class="line">        messAge: &quot;hello&quot;</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	changeMessage(msg) =&gt; &#123;</span><br><span class="line">        this.state.messAge = msg</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        return &lt;div className=&quot;App&quot;&gt;</span><br><span class="line">            &lt;!-- 将方法通过porps传递给子组件 --&gt;</span><br><span class="line">        	&lt;Son message=&#123;this.state.messAge&#125; changeMes=&#123;this.changeMessage&#125;&gt;&lt;/Son&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// Son.js</span><br><span class="line">import React from &quot;react&quot;</span><br><span class="line"></span><br><span class="line">class Son extends React.PureComponect &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return &lt;div&gt;</span><br><span class="line">            &lt;!-- 点击时触发父组件方法，通过父组件的方法修改父组件的值 --&gt;</span><br><span class="line">            &#123;this.props.changeMes&#125;</span><br><span class="line">        	&lt;button onClick=&#123;()=&gt;&#123;</span><br><span class="line">                    this.props.changeMes(&quot;hello word&quot;)</span><br><span class="line">                &#125;&#125;&gt; 修改父组件值 &lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default Son;</span><br></pre></td></tr></table></figure>

<ol start="5">
<li>兄弟组件传值<ul>
<li>子组件1 -&gt; 父组件  -&gt; 子组件2</li>
<li>eventbus</li>
<li>多级的，在函数式写法中有一个hocks -  Context进行操作</li>
</ul>
</li>
</ol>
<h4 id="React中的样式操作"><a href="#React中的样式操作" class="headerlink" title="React中的样式操作"></a>React中的样式操作</h4><ol>
<li>class 类名设置<ul>
<li>必须为className</li>
<li>类名和样式写在css文件里</li>
<li>必须接受一个字符串</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// App.js</span><br><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">class App extends React.PureComponent &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">        	&lt;div className=&quot;header&quot;&gt; header &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// App<span class="selector-class">.css</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>style 内联</li>
</ol>
<ul>
<li>不能像原生一样写成字符串，必须写成对象</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// App.js</span><br><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">class App extends React.PureComponent &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;!-- 第一个&#123;&#125; 是模板表达式， 第二个&#123;&#125; 是对象 --&gt;</span><br><span class="line">        	&lt;div style=&#123;</span><br><span class="line">                    &#123;</span><br><span class="line">                        color: red,</span><br><span class="line">                        fontSize: 12px.</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;&gt; header &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>如何解决组件专用css</p>
<ul>
<li>将导入的css文件使用.model.css 模块化方式导入，对象的方式使用</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// App.js</span><br><span class="line">import styleModel from &#x27;./App.model.css&#x27;</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">class App extends React.PureComponent &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;!-- 使用 &quot; &quot; 的方法对css类名进行空格分开 --&gt;</span><br><span class="line">        	&lt;div className=&#123; styleModel.header + &quot; &quot; + styleModel.appStyle&#125;&gt; header &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>

<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// App<span class="selector-class">.model</span><span class="selector-class">.css</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.header</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.appStyle</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: pink;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>当需要动态的删减类名，如何更舒服的控制类名的添加和减少</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">class Son extends React.PureComponent &#123;</span><br><span class="line">    state &#123;</span><br><span class="line">        hasSonClass: true,</span><br><span class="line">    &#125;</span><br><span class="line">	</span><br><span class="line">	render() &#123;</span><br><span class="line">        return (</span><br><span class="line">        	&lt;div className=&#123;&quot;App &quot; + (this.state.hasSonClass ? &quot;Son&quot; : &quot;&quot;)&#125;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;button onClick(()=&#123;</span><br><span class="line">                    this.state.hasClass = !this.state.hasClass</span><br><span class="line">                &#125;)&gt;动态添加Son style class名&lt;/button&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 第二种方法</span><br><span class="line">// 使用第三方库 classnames</span><br><span class="line">// 如果使用了模块化方法后 需要将classnames this指向为模块化,引入的classnames更改为classnames/bind</span><br><span class="line">/** </span><br><span class="line">import classnames from &quot;classnames/bind&quot;</span><br><span class="line">import sonStyle from &quot;./son.model.css&quot;</span><br><span class="line">let bindCN = classnames.bind(sonStyle)</span><br><span class="line">*/</span><br><span class="line">import classNames from &quot;classnames&quot;</span><br><span class="line">class Son extends React.PureComponent &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        hasSonClass: true,</span><br><span class="line">    &#125;</span><br><span class="line">	render() &#123;</span><br><span class="line">        return (</span><br><span class="line">        	&lt;div className=&#123;classNames(&#123;</span><br><span class="line">                    App: true,</span><br><span class="line">                    Son: this.state.hasClass</span><br><span class="line">                &#125;)&#125;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;button onClick(()=&#123;</span><br><span class="line">                    this.state.hasClass = !this.state.hasClass</span><br><span class="line">                &#125;)&gt;动态添加Son style class名&lt;/button&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="React-生命周期"><a href="#React-生命周期" class="headerlink" title="React 生命周期"></a>React 生命周期</h4><ol>
<li>react 生命周期分为三大阶段<ul>
<li>挂载	更新	卸载</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/react%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F.png" alt="image-20240616161309108"></p>
<ul>
<li>挂载</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">import classNames from &quot;classnames&quot;</span><br><span class="line">class App extends React.PureComponent &#123;</span><br><span class="line">    // 首先执行 类似类初始化方法</span><br><span class="line">    constructor(props) &#123;</span><br><span class="line">        super(props)</span><br><span class="line">        this.state = &#123;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        console.log(&quot;1&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    // 第二执行 getDerivedStateFromProps 静态方法</span><br><span class="line">    static getDervedStateFromProps(props,state)&#123;</span><br><span class="line">        console.log(&quot;2&quot;)</span><br><span class="line">        return null</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 第三执行 render函数</span><br><span class="line">	render() &#123;</span><br><span class="line">		console.log(&quot;3&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 最后执行componentDidMount</span><br><span class="line">    componentDidMount()&#123;</span><br><span class="line">        console.log(&quot;4&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>更新</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">import classNames from &quot;classnames&quot;</span><br><span class="line">class App extends React.Component &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        msg: &quot;hello&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    // 首先执行 getDerivedStateFromProps 静态方法</span><br><span class="line">    static getDervedStateFromProps(props,state)&#123;</span><br><span class="line">        console.log(&quot;1&quot;)</span><br><span class="line">        return null</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 第二执行 shouldComponentUpedate  PureComponent下不执行</span><br><span class="line">    shouldComponentUpedate(props, state) &#123;</span><br><span class="line">        // 优化生命周期</span><br><span class="line">        console.log(&quot;2&quot;)</span><br><span class="line">        //如果return 为false 则以下不执行</span><br><span class="line">        // this.state 是修改前的数据， state是修改后的数据</span><br><span class="line">        let change = true</span><br><span class="line">        for (let item in this.state)&#123;</span><br><span class="line">            if(state[item] !== this.state[item])&#123;</span><br><span class="line">                change = false</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return change</span><br><span class="line">    &#125;</span><br><span class="line">    // 第三执行 render函数</span><br><span class="line">	render() &#123;</span><br><span class="line">		console.log(&quot;3&quot;)</span><br><span class="line">        return &lt;div&gt;</span><br><span class="line">        	&lt;div&gt;&#123;this.state.msg&#125;&lt;/div&gt;</span><br><span class="line">            &lt;button onClick=&#123;()=&#123;</span><br><span class="line">                    this.state.msg = &quot;hello word&quot;</span><br><span class="line">                &#125;&#125;&gt;修改msg&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">    //第四执行 getSnapshotBeforeUpdate</span><br><span class="line">    getSnapshotBeforeUpdate()&#123;</span><br><span class="line">        console.log(&quot;4&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 最后执行componentDidUpdate</span><br><span class="line">    componentDidUpdate()&#123;</span><br><span class="line">        console.log(&quot;5&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>卸载 ( componentWillUnmount)</li>
</ul>
<ol start="2">
<li><p>重点生命周期讲解</p>
<ul>
<li>render 	通过render函数来执行决定组件渲染什么内容，所以无论是更新还是初次挂载都必须执行render</li>
<li>compinentDidMount           组件挂载完成，一般用来做些 页面初始化操作，比如初始化请求，echart绘制等，也就是vue的mounted里能做的事</li>
<li>shouldComponentUpdate       更新阶段调用，如果return false则不会执行render函数继续更新，从而达到阻止更新的效果，一般用来做性能优化</li>
<li>componentDidUpdate            更新完成，等同于vue的update</li>
<li>componentWillUnmount          组件即将卸载，通常做些全局事件的监听的卸载；定时器，计时器的卸载等。来优化性能</li>
</ul>
</li>
<li><p>vue的更新机制与react的问题所在</p>
<ul>
<li><p>vue</p>
<p>vue是在get和set里触发更新的； vue在get部分有一个重要的操作——依赖收集； 这样我们在更改了数据后，只会更新用到了这个数据的地方。做到最小的更新范围</p>
</li>
<li><p>react</p>
<p>react的更新是调用方法时触发的，并没有依赖收集的过程。所以她会更新整个组件数。也就是会把子组件一起更新。即使更新的数据和子组件没有任何关系</p>
</li>
</ul>
</li>
</ol>
<h4 id="ref和context"><a href="#ref和context" class="headerlink" title="ref和context"></a>ref和context</h4><ul>
<li><p>ref</p>
<p>和vue中的ref是一个道理，用于获取真是dom。</p>
<p>注意事项：</p>
<ul>
<li>ref 必须在挂载后才能获取，通常在componentDidMount</li>
<li>ref 获取组件，不能获取函数组件</li>
</ul>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">import React from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class App extends React.PureComponent &#123;</span><br><span class="line">    </span><br><span class="line">    let div1 = React.createRef();</span><br><span class="line"></span><br><span class="line">	componentDidMount() &#123;</span><br><span class="line">        //废弃</span><br><span class="line">        console.log(this.refs.dev1)</span><br><span class="line">        </span><br><span class="line">        console.log(this.div1.current)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">            &lt;!-- 幽灵节点 --&gt;</span><br><span class="line">        	&lt;&gt;</span><br><span class="line">            	&lt;div className=&quot;App&quot; ref=&#123;this.div1&#125;&gt;</span><br><span class="line">            		div</span><br><span class="line">            	&lt;/div&gt;</span><br><span class="line">            &lt;/&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>context</p>
<p>类似于vue的provider 和 injected ，用于嵌套很深的爷孙组件之间的传值 </p>
<p>注意事项：</p>
<p>​	子组件使用父组件创建的context对象，不能创建</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">// App.js</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import Son from &#x27;./Son&#x27;</span><br><span class="line"></span><br><span class="line">// Context 是一个组件,并暴露出去; 函数式中直接使用 createContext() hocks</span><br><span class="line">export let Context = React.createContext()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">class App extends React.PureComponent &#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        msg: &quot;父组件消息，传给后代组件&quot;</span><br><span class="line">        hello: &quot;word&quot;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">        	&lt;&gt;</span><br><span class="line">                &lt;dev className=&quot;App&quot;&gt;</span><br><span class="line">                    App</span><br><span class="line">                &lt;/dev&gt;</span><br><span class="line">            	&lt;Context.Provider value=&#123; &#123;msg:this.stage.msg, hello:this.state.hello&#125; &#125;&gt;</span><br><span class="line">            		&lt;Son&gt;&lt;/Son&gt;</span><br><span class="line">            	&lt;/Context.Provider&gt;</span><br><span class="line">            &lt;/&gt;</span><br><span class="line">            </span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// Son.js</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import GrandSon from &#x27;./grandSon&#x27;</span><br><span class="line"></span><br><span class="line">class Son extends React.PureComponent &#123;</span><br><span class="line"></span><br><span class="line">    </span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">        	&lt;&gt;</span><br><span class="line">                &lt;div className=&quot;Son&quot;&gt;</span><br><span class="line">                    Son</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">                &lt;GrandSon&gt;&lt;/GrandSon&gt;</span><br><span class="line">            &lt;/&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">export default Son;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// grandSon.js</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">import &#123;Context&#125; from &#x27;./App&#x27;</span><br><span class="line">class GrandSon extends React.PureComponent &#123;</span><br><span class="line">    render() &#123;</span><br><span class="line">        return (</span><br><span class="line">        	&lt;&gt;</span><br><span class="line">            	&lt;div className=&quot;GrandSon&quot;&gt;GrandSon&lt;/div&gt;</span><br><span class="line">            	&lt;!-- 这里渲染App的数据 --&gt;</span><br><span class="line">            	&lt;Context.Consumer&gt;</span><br><span class="line">            		&#123;</span><br><span class="line">                    	(value)=&gt;&#123;</span><br><span class="line">                            return (</span><br><span class="line">                            	&lt;&gt;</span><br><span class="line">                                	&lt;div&gt;&#123;value.msg&#125;&lt;/div&gt;</span><br><span class="line">                                	&lt;div&gt;&#123;value.hello&#125;&lt;/div&gt;</span><br><span class="line">                                &lt;/&gt;</span><br><span class="line">                            )</span><br><span class="line">                        &#125;</span><br><span class="line">                	&#125;</span><br><span class="line">            	&lt;/Context.Consumer&gt;</span><br><span class="line">            &lt;/&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default GrandSon;</span><br></pre></td></tr></table></figure>



<h4 id="React-新版本函数组件跟hook"><a href="#React-新版本函数组件跟hook" class="headerlink" title="React 新版本函数组件跟hook"></a>React 新版本函数组件跟hook</h4><ol>
<li><p>函数组件和类组件主要区别</p>
<ul>
<li>函数组件没有生命周期</li>
<li>函数组件没有this</li>
<li>函数组件通过hook来完成各种操作</li>
<li>函数组件本身的函数体相当于render函数</li>
<li>props在函数的第一个参数接受</li>
</ul>
</li>
<li><p>函数组件的使用</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// App.js</span><br><span class="line">function App()&#123;</span><br><span class="line">    function Son()&#123;</span><br><span class="line">        return &lt;div&gt;Son&lt;/div&gt;</span><br><span class="line">    &#125;</span><br><span class="line">    return &lt;&gt;</span><br><span class="line">    	&lt;div&gt;App&lt;/div&gt;</span><br><span class="line">        &lt;Son&gt;&lt;/Son&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>state的创建和更新- useState()</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/useState.png" alt="image-20240617132509799"></p>
</li>
</ol>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useState &#125; from &#x27;react&#x27;</span><br><span class="line"></span><br><span class="line">function App ()&#123;</span><br><span class="line">    </span><br><span class="line">    let [msg, setMsg] = useState(&quot;hello&quot;)</span><br><span class="line">    </span><br><span class="line">    function changeMsg(e)&#123;</span><br><span class="line">        setMsg(&quot;hello &quot;+e)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    return &lt;div&gt;</span><br><span class="line">    	&#123;msg&#125;</span><br><span class="line">        &lt;button onClick=&#123;changeMsg.bind(this,&quot;work&quot;)&#125;&gt;change&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li><p>useReducer</p>
</li>
<li><p>useEffect</p>
<p>定义副作用</p>
<ul>
<li>不传第二个参数 &#x3D; componentDitMount 和 componentDidUpdate</li>
<li>第二个参数传空数组 &#x3D; componentDidMount</li>
<li>第二个参数数组里放某个数据 &#x3D; watch监听 || 更新</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">function App()&#123;</span><br><span class="line">    /**</span><br><span class="line">    当为监听时</span><br><span class="line">    vue-watch 默认是不会开始就执行的</span><br><span class="line">    useEffect 监听某个数据，开始就会执行一次 (didMount)</span><br><span class="line">    */</span><br><span class="line">    useEffect(()=&#123;</span><br><span class="line">        //componentDitMount 和 componentDidUpdate</span><br><span class="line">    &#125;)</span><br><span class="line">    </span><br><span class="line">    useEffect(()=&#123;</span><br><span class="line">        // componentDidMount</span><br><span class="line">    &#125;,[])</span><br><span class="line">    </span><br><span class="line">    useEffect(()=&#123;</span><br><span class="line">        // componentDidUpdate</span><br><span class="line">    &#125;,[msg])</span><br><span class="line">    </span><br><span class="line">    return &lt;div&gt;&lt;/div&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line">在子组件中使用,表示的是卸载</span><br><span class="line">*/</span><br><span class="line">useEffect(()=&#123;</span><br><span class="line">        // componentWillUnmount</span><br><span class="line">    &#125;,[])</span><br><span class="line">useEffect(()=&#123;</span><br><span class="line">        // componentDitMount 和 componentDidUpdate</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>

<ol start="5">
<li><p>useMemo</p>
<p>让一段计算在开始运算一次，后续只有依赖的数据发生变化时才重新运算</p>
<p>作用：</p>
<pre><code>1. 起类似于vue的一个计算属性的效果
1. 缓存一个数据，让其不会重新创建
</code></pre>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function App()&#123;</span><br><span class="line">    /**</span><br><span class="line">    </span><br><span class="line">    */</span><br><span class="line">    let all = useMemo(()=&#123;</span><br><span class="line">        return 0</span><br><span class="line">    &#125;,[msg])</span><br><span class="line">    </span><br><span class="line">    return &lt;div&gt;&lt;/div&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="6">
<li><p>useCallback</p>
<p>缓存一个方法，不会让方法每次都创建</p>
</li>
<li><p>其他hock</p>
<ul>
<li>useRef——函数组件中使用ref 来获取DOM</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">let divRef = useRef()</span><br></pre></td></tr></table></figure>

<ul>
<li>useContext——更方便的解析context的provider的数据</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 父组件 首先创建context对象</span><br><span class="line">export let context1 = React.createContext()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 子组件使用 useContext 获取</span><br><span class="line">let SonContext = useContext(context1)</span><br></pre></td></tr></table></figure>

<ul>
<li>hock 只能于函数组件</li>
</ul>
</li>
</ol>
<h4 id="高阶组件"><a href="#高阶组件" class="headerlink" title="高阶组件"></a>高阶组件</h4><ul>
<li><p>逻辑复用</p>
<p>如果使用ui 内容和操作的复用我们会使用组件，但是如果是单纯的逻辑复用，写为组件不免麻烦</p>
<p>vue：	Mixin 和自定义指令</p>
<p>react：	hoc高阶组件</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// TestHoc.js</span><br><span class="line">import React from &#x27;react&#x27;</span><br><span class="line">export default function TestHoc (UseCom)&#123;</span><br><span class="line">    return class extends React.Component &#123;</span><br><span class="line">        state = &#123;</span><br><span class="line">            a: 123</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        render()&#123;</span><br><span class="line">            return &lt;&gt;</span><br><span class="line">            	&lt;UseCom a=&#123;this.state.a&#125; &#123;...this.props&#125;&gt;&lt;/UseCom&gt;</span><br><span class="line">            &lt;/&gt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>使用例子<ul>
<li>提供复用的数据和方法，给到组件的props，你可以把很多页面都有的一些逻辑操作提取出来混入</li>
<li>提供生命周期操作，比如写一个高阶组件形式的PureComponent</li>
</ul>
</li>
</ul>
<h4 id="React-router"><a href="#React-router" class="headerlink" title="React - router"></a>React - router</h4><ol>
<li>三个版本<ul>
<li>React-router 	服务端渲染使用</li>
<li>React-router-dom       浏览器端渲染使用</li>
<li>React-router-native        React-native混合开发使用</li>
</ul>
</li>
<li>React-router 使用步骤<ul>
<li>通过BroserRouter或者HashRouter包裹要使用路由的根组件</li>
<li>使用Routes组件，定义路由显示区域</li>
<li>使用Router组件，定义具体路由规则</li>
<li>使用NavLink或者Link组件，定义调整链接</li>
</ul>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import logo from &#x27;./logo.svg&#x27;</span><br><span class="line">import &#x27;./App.css&#x27;</span><br><span class="line">import &#123; Routes, Route, NavLink, Link &#125; from &#x27;react-router-dom&#x27;</span><br><span class="line">import Page1 from &quot;./Page1&quot;</span><br><span class="line">import Page2 from &quot;./Page2&quot;</span><br><span class="line"></span><br><span class="line">function APP()&#123;</span><br><span class="line">    return (</span><br><span class="line">    	&lt;div className=&quot;App&quot;&gt;</span><br><span class="line">        	&lt;div&gt;菜单&lt;/div&gt;</span><br><span class="line">            &lt;!-- NavLink --&gt;</span><br><span class="line">            &lt;NavLink to=&quot;/page1&quot;&gt;page1&lt;/NavLink&gt;</span><br><span class="line">            &lt;NavLink to=&quot;/page2&quot;&gt;page2&lt;/NavLink&gt;</span><br><span class="line">            &lt;!-- Link --&gt;</span><br><span class="line">            &lt;Link to=&quot;/page1&quot;&gt;page1&lt;/Link&gt;</span><br><span class="line">            &lt;Link to=&quot;/page2&quot;&gt;page2&lt;/Link&gt;</span><br><span class="line">            &lt;Routes&gt;</span><br><span class="line">            	&lt;Route path=&quot;/page1&quot; element=&#123;&lt;Page1&gt;&lt;/Page1&gt;&#125;&gt;&lt;/Route&gt;</span><br><span class="line">                &lt;!-- v5  --&gt;</span><br><span class="line">                &lt;Route path=&quot;/page1&quot; Component=&#123;Page2&#125;&gt;&lt;/Route&gt;</span><br><span class="line">            &lt;/Routes&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><p>react-router 提供的一些其他组件</p>
<ul>
<li>Navigate——路由重定向</li>
<li>Outlet——嵌套路由的子路由显示处</li>
</ul>
<p>React中没有vue那样的vue.use方法，react中使用一个插件，库，都是引入一个组件，然后把要使用该插件的部分包起来</p>
</li>
<li><p>动态路由和嵌套路由</p>
<ul>
<li>嵌套路由</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Routes, Route, NavLink, Link &#125; from &#x27;react-router-dom&#x27;</span><br><span class="line"></span><br><span class="line">&lt;Route path=&quot;/page2&quot; element=&#123;&lt;Page2/&gt;&#125;&gt;</span><br><span class="line">	&lt;Route path=&quot;son1&quot; element=&#123;&lt;Page2Son1/&gt;&#125;&gt;&lt;/Route&gt;  &lt;!-- &quot;/page2/son1&quot; --&gt;</span><br><span class="line">    &lt;Route path=&quot;son2&quot; element=&#123;&lt;Page2Son2/&gt;&#125;&gt;&lt;/Route&gt;  &lt;!-- &quot;/page2/son2&quot; --&gt;</span><br><span class="line">&lt;/Route&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// page2.js</span><br><span class="line">// 嵌套路由在子路由需要定义Outlet  类似vue的RouterView</span><br><span class="line">import &#123; Outlet &#125; from &quot;react-router-dom&quot;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">	page2</span><br><span class="line">    &lt;Outlet&gt;&lt;/Outlet&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>



<ul>
<li><p>动态路由</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=&quot;/page/:id&quot; Component=&#123;Page3&#125; &gt;&lt;/Route&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Params参数</p>
<p>V6 —— useParams  (hock)</p>
<p>V5—— this.props.match.params  (class)</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useParams &#125; from &quot;react-route-dom&quot;</span><br><span class="line"></span><br><span class="line">function Page3()&#123;</span><br><span class="line">    let params = useParams()</span><br><span class="line">    return &lt;&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Query参数</p>
<p>V6—— useSearchParams</p>
<p>V5—— this.props.location.search</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useSearchParams &#125; from &quot;react-router-dom&quot;</span><br><span class="line"></span><br><span class="line">function Page4()&#123;</span><br><span class="line">    let [searchParams, setSearchParams] = useSearchParams();</span><br><span class="line">    console.log(searchParams.get(&quot;a&quot;), setSearcjParams(&#123;a: 888&#125;))</span><br><span class="line">    return &lt;&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>Location信息</p>
<p>V6—— useLocation</p>
<p>V5—— this.props.location.state</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import &#123; useLocation &#125; from &quot;react-router-dom&quot;</span><br><span class="line"></span><br><span class="line">function Page5()&#123;</span><br><span class="line">    let location = useLocation();</span><br><span class="line">    console.log(location.search)</span><br><span class="line">    return &lt;&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>js 控制跳转地址</p>
<ul>
<li>v6——useNavigate 创建跳转方法，然后跳转</li>
<li>V5——this.props.history.push()</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">import &#123; Outlet, useNavigate &#125; from &quot;react-route-dom&quot;</span><br><span class="line"></span><br><span class="line">function Page6()&#123;</span><br><span class="line">    let nav = useNavigate()</span><br><span class="line">    return &lt;&gt;</span><br><span class="line">		&lt;button onClick=&#123;()=&gt;&#123;</span><br><span class="line">            	nav(&quot;/page6?a=111&quot;,&#123; state:&#123;aaa:&quot;1111&quot;&#125; &#125;)</span><br><span class="line">        	&#125;</span><br><span class="line">        &#125;&gt;跳转&lt;/button&gt;</span><br><span class="line">    	&lt;Outlet&gt;&lt;/Outlet&gt;</span><br><span class="line">    &lt;/&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>控制权限</p>
<ul>
<li>通过 navigate跳转,  直接不生成</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;Route path=&quot;/page1&quot; element=&#123;_token ? &lt;Page1&gt;&lt;/Page1&gt; : &lt;Navigate to=&quot;/page4&quot;&gt;&lt;/Navigate&gt;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>异步路由( 路由懒加载)</p>
<p>React做异步路由，要配合到react本身的一个方法——lazy和一个组件suspense</p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 懒加载</span><br><span class="line">let LayPage4 = Lazy(() =&gt;&#123; return import(&quot;./Page4&quot;)&#125;)</span><br><span class="line">function App()&#123;</span><br><span class="line">    &lt;&gt;</span><br><span class="line">    	&lt;Suspense fallback=&#123;&lt;h3&gt;加载中。。&lt;/h3&gt;&#125;&gt;</span><br><span class="line">        	&lt;Routes&gt;</span><br><span class="line">                &lt;Route path=&quot;/page4&quot; Component=&#123;LayPage4&#125;&gt;&lt;Route&gt;            </span><br><span class="line">        	&lt;/Routes&gt;</span><br><span class="line">			</span><br><span class="line">        &lt;/Suspense&gt;</span><br><span class="line"></span><br><span class="line">    &lt;/&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>





<h4 id="React-状态管理"><a href="#React-状态管理" class="headerlink" title="React 状态管理"></a>React 状态管理</h4><ol>
<li>状态管理<ul>
<li>react，没有专门的状态管理库，都是通用的js状态管理库，所以我们首先创建一个全局的数据储存和管理工具</li>
<li>通过其他工具，数据修改能触发react页面的更新</li>
</ul>
</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86.png" alt="image-20240618164227474"></p>
<ol start="2">
<li><p>redux 创建仓库</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/redux.png" alt="image-20240618174604887"></p>
</li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// ./src/store/index.js</span><br><span class="line">import &#123;legacy_createStore as createStore &#125; from &quot;redux&quot;</span><br><span class="line"></span><br><span class="line">function reducer (state = &#123;msg:&quot;default&quot;&#125;, action)&#123;</span><br><span class="line">    // 具体修改数据的行为</span><br><span class="line">    switch (action.type)&#123;</span><br><span class="line">        case &#x27;changeMes&#x27;: </span><br><span class="line">            state.meg = action.paylod;</span><br><span class="line">        	return &#123; ...state &#125;</span><br><span class="line">        case &#x27;resetMes&#x27;:</span><br><span class="line">            state.msg = &quot;hello&quot;</span><br><span class="line">            return &#123; ...state &#125;</span><br><span class="line">        default :</span><br><span class="line">            return state</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> let store = createStore(reducer)</span><br><span class="line"> export default store</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">//App.js</span><br><span class="line">import store from &#x27;./src/store/index&#x27;</span><br><span class="line"></span><br><span class="line">function App(props) &#123;</span><br><span class="line">    let storeApp = store.getState()</span><br><span class="line">    console.log(storeApp)</span><br><span class="line">    return (</span><br><span class="line">    	&lt;div className=&quot;App&quot;&gt;</span><br><span class="line">            &#123;storeApp.msg&#125;</span><br><span class="line">        	&lt;button onClick(()=&gt;&#123;</span><br><span class="line">                    // 修改msg ;相当于上面的renducer的aciton参数</span><br><span class="line">                    store.dispatch(&#123;</span><br><span class="line">                        type: &quot;changeMes&quot;</span><br><span class="line">                        paylod: &quot;hello word&quot;</span><br><span class="line">                    &#125;)</span><br><span class="line">                    console.log(storeApp)</span><br><span class="line">            &#125;&lt;/button&gt;)&gt;修改store&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">export default App;</span><br></pre></td></tr></table></figure>

<p>触发修改并不能让页面数据响应式改变</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// index.js</span><br><span class="line">import store from &#x27;./store&#x27;</span><br><span class="line"></span><br><span class="line">//监听store修改，一旦修改重新渲染;但成本大，所以借助react-redux做关联</span><br><span class="line">store.subscribe(()=&gt;&#123;</span><br><span class="line">	root.render(</span><br><span class="line">        &lt;React.StrictMode&gt;</span><br><span class="line">            &lt;App /&gt;</span><br><span class="line">        &lt;/React.StrictMode&gt;</span><br><span class="line">    );    </span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">root.render(</span><br><span class="line">	&lt;React.StrictMode&gt;</span><br><span class="line">    	&lt;App /&gt;</span><br><span class="line">    &lt;/React.StrictMode&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>react-redux</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/redux2.png" alt="image-20240618181758922"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">// ./src/store/index.js</span><br><span class="line">import &#123;legacy_createStore as createStore, combineReducers&#125; from &quot;redux&quot;</span><br><span class="line"></span><br><span class="line">function reducer1 (state = &#123;msg:&quot;default&quot;&#125;, action)&#123;</span><br><span class="line">    // 具体修改数据的行为</span><br><span class="line">    switch (action.type)&#123;</span><br><span class="line">        case &#x27;changeMes&#x27;: </span><br><span class="line">            state.meg = action.paylod;</span><br><span class="line">        	return &#123; ...state &#125;</span><br><span class="line">        case &#x27;resetMes&#x27;:</span><br><span class="line">            state.msg = &quot;hello&quot;</span><br><span class="line">            return &#123; ...state &#125;</span><br><span class="line">        default :</span><br><span class="line">            return state</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function reducer2 (state = &#123; num:0 &#125;, action)&#123;</span><br><span class="line">    // 具体修改数据的行为</span><br><span class="line">    switch (action.type)&#123;</span><br><span class="line">        case &#x27;changeMes&#x27;: </span><br><span class="line">            state.num += 1</span><br><span class="line">        	return &#123; ...state &#125;</span><br><span class="line">        case &#x27;resetMes&#x27;:</span><br><span class="line">            state.num = 10</span><br><span class="line">            return &#123; ...state &#125;</span><br><span class="line">        default :</span><br><span class="line">            return state</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// 分模块</span><br><span class="line">let reducer = combineReducers(&#123;</span><br><span class="line">    reducer1,</span><br><span class="line">    reducer2</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"> let store = createStore(reducer)</span><br><span class="line"> export default store</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// index.js</span><br><span class="line">import &#123; Provider &#125; from &#x27;react-redux&#x27;</span><br><span class="line">import &#123; store &#125; from &quot;redux&quot;</span><br><span class="line">root.render(</span><br><span class="line">	&lt;React.StrictMode&gt;</span><br><span class="line">    	&lt;Provider store=&#123;store&#125;&gt;</span><br><span class="line">        	&lt;App /&gt;</span><br><span class="line">        &lt;/Provider&gt;</span><br><span class="line">    &lt;/React.StrictMode&gt;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">//App.js</span><br><span class="line">import &#123;connect&#125; from &#x27;react-redux&#x27;</span><br><span class="line"></span><br><span class="line">function App(props) &#123;</span><br><span class="line">    // props会多一个dispatch 和 msg</span><br><span class="line">    console.log(props)</span><br><span class="line">    return (</span><br><span class="line">    	&lt;div className=&quot;App&quot;&gt;</span><br><span class="line">            &#123;storeApp.msg&#125;</span><br><span class="line">        	&lt;button onClick(()=&gt;&#123;</span><br><span class="line">                    // 修改msg数据</span><br><span class="line">                    props.dispatch(&#123;</span><br><span class="line">                        type: &quot;changeMes&quot;,</span><br><span class="line">                        payload: &quot;hello word&quot;</span><br><span class="line">                    &#125;)</span><br><span class="line">            &#125;)&gt;修改store&lt;/button&gt;</span><br><span class="line">        	&lt;button onClick(()=&gt;&#123;</span><br><span class="line">                    // 修改msg数据</span><br><span class="line">                    props.changeMes2()</span><br><span class="line">            &#125;)&gt;修改store&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line">connect:</span><br><span class="line">	第一个参数：state的映射，那些state映射到该组件props(当前组件为App)</span><br><span class="line">	第二个参数方法映射，你要给props里边加那些方法</span><br><span class="line">*/</span><br><span class="line">let ReduxApp = connect((state)=&gt;&#123;</span><br><span class="line">    // 将详细模块返回</span><br><span class="line">    return &#123; state.reducer1.msg &#125;</span><br><span class="line">&#125;, ()=&gt;&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        changeMes2()&#123;</span><br><span class="line">            dispatch(&#123;</span><br><span class="line">                type: &quot;changeMes&quot;,</span><br><span class="line">                payload: &quot;hello world2&quot;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(App)</span><br><span class="line">export default ReduxApp;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>@reduxjs&#x2F;tooikit (基于redux)</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/redux3.png" alt="image-20240618191546117"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">// ./src/store/index.js</span><br><span class="line">import &#123;createSlice, configurStore&#125; from &#x27;@reduxjs/tooikit&#x27;;</span><br><span class="line"></span><br><span class="line">let mesSlice = createSlice(&#123;</span><br><span class="line">    name: &quot;mesSlice&quot;,</span><br><span class="line">    initialState: &#123;</span><br><span class="line">        mes: &quot;hello&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    reducers: &#123;</span><br><span class="line">        changeMes(state,action) &#123;</span><br><span class="line">            state.mes = action.payload</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">let mesSlice = createSlice(&#123;</span><br><span class="line">    name: &quot;numSlice&quot;,</span><br><span class="line">    initialState: &#123;</span><br><span class="line">        num: 0</span><br><span class="line">    &#125;,</span><br><span class="line">    reducers: &#123;</span><br><span class="line">        addNum(state,action) &#123;</span><br><span class="line">            state.num += 1</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">let store = configureStore(&#123;</span><br><span class="line">    reducer: &#123;</span><br><span class="line">        mesReducer: mesSlice.reducer,</span><br><span class="line">        numReducer: mesSlice.reducer</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">export let &#123; changeMes &#125; = mesSlice.actions;</span><br><span class="line">export let &#123; addNum &#125; = numSlice.actions;</span><br><span class="line"></span><br><span class="line">export default store</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">// app.js</span><br><span class="line">import store from &quot;./store/index&quot;</span><br><span class="line">import &#123;connect&#125; from &#x27;react-redux&#x27;</span><br><span class="line">import &#123;changeMes&#125; from &#x27;./store/index&#x27;</span><br><span class="line">function App(props) &#123;</span><br><span class="line">    // props会多一个dispatch 和 msg</span><br><span class="line">    console.log(props)</span><br><span class="line">    return (</span><br><span class="line">    	&lt;div className=&quot;App&quot;&gt;</span><br><span class="line">            &#123;storeApp.msg&#125;</span><br><span class="line">        	&lt;button onClick(()=&gt;&#123;</span><br><span class="line">                    // 修改msg数据</span><br><span class="line">                    props.dispatch(&#123;</span><br><span class="line">                        type: &quot;changeMes&quot;,</span><br><span class="line">                        payload: &quot;hello word&quot;</span><br><span class="line">                    &#125;)</span><br><span class="line">            &#125;)&gt;修改store&lt;/button&gt;</span><br><span class="line">        	&lt;button onClick(()=&gt;&#123;</span><br><span class="line">                    // 修改msg数据</span><br><span class="line">                    props.changeMes2()</span><br><span class="line">            &#125;)&gt;修改store&lt;/button&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line">connect:</span><br><span class="line">	第一个参数：state的映射，那些state映射到该组件props(当前组件为App)</span><br><span class="line">	第二个参数方法映射，你要给props里边加那些方法</span><br><span class="line">*/</span><br><span class="line">let ReduxApp = connect((state)=&gt;&#123;</span><br><span class="line">    // 将详细模块返回</span><br><span class="line">    return &#123; state.reducer1.msg &#125;</span><br><span class="line">&#125;, ()=&gt;&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        changeMes2()&#123;</span><br><span class="line">            dispatch(changeMes(&quot;hello word&quot;))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)(App)</span><br><span class="line">export default ReduxApp;</span><br></pre></td></tr></table></figure>





<h4 id="React中的路由控制"><a href="#React中的路由控制" class="headerlink" title="React中的路由控制"></a>React中的路由控制</h4><ol>
<li>根据配置生成路由</li>
</ol>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/%E8%B7%AF%E7%94%B1.png" alt="image-20240619114144376"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// ./src/route/route.js</span><br><span class="line"></span><br><span class="line">import Page1 from &quot;./page1&quot;</span><br><span class="line">import Page2 from &quot;./page2&quot;</span><br><span class="line">import Page3 from &quot;./page3&quot;</span><br><span class="line"></span><br><span class="line">// 定义路由规则</span><br><span class="line">export default [</span><br><span class="line">    &#123;</span><br><span class="line">        path: &quot;/page1&quot;,</span><br><span class="line">        component: Page1</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: &quot;/page2&quot;,</span><br><span class="line">        component: Page2</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        path: &quot;/page3&quot;,</span><br><span class="line">        component: Page3</span><br><span class="line">    &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// App.js</span><br><span class="line"></span><br><span class="line">import routersArr from &quot;./src/route/route&quot;</span><br><span class="line">import createRoute from &quot;./src/route/createRoute&quot;</span><br><span class="line">function App()&#123;</span><br><span class="line">    return (</span><br><span class="line">    	 &lt;Routes&gt;</span><br><span class="line">        	&#123;createRoute()&#125;</span><br><span class="line">        &lt;/Routes&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">// ./src/route/createRoute.js</span><br><span class="line">import &#123;Route&#125; from &quot;react-route-dom&quot;</span><br><span class="line"></span><br><span class="line">export function createRoute(route)&#123;</span><br><span class="line">    return routesArr.map((item)=&gt;&#123;</span><br><span class="line">        // 递归实现子路由</span><br><span class="line">        if (item.children &amp;&amp; item.children.length &gt; 0)&#123;</span><br><span class="line">            return &lt;Route path=&#123;item.path&#125; key=&#123;item.path&#125; Component=&#123;item.component&#125;&gt;</span><br><span class="line">            	&#123;createRoute(item.children)&#125;</span><br><span class="line">            &lt;/Route&gt;</span><br><span class="line">        &#125;else&#123;</span><br><span class="line">            return &lt;Route key=&#123;item.path&#125; path=&#123;item.path&#125; Component=&#123;item.component&#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><p>根据权限控制生成路由 ( 补充！)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/%E8%B7%AF%E7%94%B12.png" alt="image-20240619121028643"></p>
</li>
<li><p>路由传参</p>
</li>
</ol>
<h4 id="结合实际项目-react坑"><a href="#结合实际项目-react坑" class="headerlink" title="结合实际项目 react坑"></a>结合实际项目 react坑</h4><ol>
<li><p>基础知识</p>
<ul>
<li>react的更新问题，react更新会重新执行react函数组件方法本身，并且子组件也会一起更新</li>
</ul>
<p>这明显是不合理的，合理的更新机制是只有当这个组件自己的state或者props发生了改变，才进行更新，为了达到这个策略，vue和react分别做了两个解决方案</p>
<p>​	vue——源码里自动依赖收集</p>
<p>​	react——开发者自己去React.memo 包装组件</p>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">// 子组件Pager.js</span><br><span class="line">import React from &quot;react&quot;</span><br><span class="line">function Pager()&#123;</span><br><span class="line">    return (</span><br><span class="line">    	&lt;div className=&quot;Pager&quot;&gt;</span><br><span class="line">        	&lt;div&gt;1&lt;/div&gt;</span><br><span class="line">            &lt;div&gt;2&lt;/div&gt;</span><br><span class="line">            &lt;div&gt;3&lt;/div&gt;</span><br><span class="line">            &lt;div&gt;4&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br><span class="line">// 使用React.memo()  只有当组件本身或props更新才会更新</span><br><span class="line">export default React.memo(Pager)</span><br></pre></td></tr></table></figure>



<ul>
<li>useCallback和useMemo的滥用</li>
</ul>
<p>react每次更新都会重新执行一次方法体。那么这个时候就会有两个问题。</p>
<p>当有对象或方法传递给子组件时，更新相当于内存里新建了一个对象或方法 。就会导致子组件props也会更新。</p>
<p>这个方法需要用useCallback()包裹；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let getClick = useCallback(()=&gt;&#123;</span><br><span class="line">    </span><br><span class="line">&#125;,[])</span><br></pre></td></tr></table></figure>



<p>是对象并且和组件数据有关，可以用useMemo()包裹；如果死数据可以丢外层</p>
<ul>
<li>react的state有个经典的闭包导致拿不到新数据的问题，常见于useEffect，useMemo，useCallback</li>
</ul>
<p>缓存更新问题； useCallback&#x2F; useEffect&#x2F; useMemo 里的方法如果依赖了某个state数据，那么这个数据必须写进依赖组，否则不会更新( 副作用方案)</p>
<p>​	——不会更新</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const getList = useCallback(()=&gt;&#123;</span><br><span class="line">    console.log(counter)</span><br><span class="line">&#125;,[])</span><br></pre></td></tr></table></figure>

<p>——会更新</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">const getList = useCallback(()=&gt;&#123;</span><br><span class="line">    console.log(counter)</span><br><span class="line">&#125;,[counter])</span><br></pre></td></tr></table></figure>

<ul>
<li><p>副作用方案( useEffect)</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/2024/08/15/react/useEffect.png" alt="image-20240619204641607"></p>
</li>
</ul>
</li>
</ol>
<h4 id="React-TS"><a href="#React-TS" class="headerlink" title="React + TS"></a>React + TS</h4><h5 id="组件传值-porps"><a href="#组件传值-porps" class="headerlink" title="组件传值 porps"></a>组件传值 porps</h5><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">import React, &#123;Component&#125; from &#x27;react&#x27;</span><br><span class="line">// 定义组件porps需要的值</span><br><span class="line">interface IProps &#123;</span><br><span class="line">    // 父组件必须要带的值</span><br><span class="line">    name: string</span><br><span class="line">    // 可选</span><br><span class="line">    address?: string</span><br><span class="line">&#125;</span><br><span class="line">    </span><br><span class="line">export default class Company extends Component&lt;IPorps&gt; &#123;</span><br><span class="line">    render()&#123;</span><br><span class="line">        return (</span><br><span class="line">        	&lt;div&gt;</span><br><span class="line">            	&#123;this.props.name&#125;</span><br><span class="line">                &lt;hr/&gt;</span><br><span class="line">            	&#123;this.props.address&#125;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="案例-TodoList"><a href="#案例-TodoList" class="headerlink" title="案例 TodoList"></a>案例 TodoList</h5></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF/">前端</a><a class="post-meta__tags" href="/tags/react/">react</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2024/08/11/react_hooks/" title="React Hocks"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">React Hocks</div></div></a></div><div class="next-post pull-right"><a href="/2024/08/15/react-rudex/" title="React-Redux"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">React-Redux</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2024/08/11/react_hooks/" title="React Hocks"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-11</div><div class="title">React Hocks</div></div></a></div><div><a href="/2024/08/15/react-rudex/" title="React-Redux"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-15</div><div class="title">React-Redux</div></div></a></div><div><a href="/2024/08/23/Canvas/" title="Canvas"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-23</div><div class="title">Canvas</div></div></a></div><div><a href="/2024/08/11/axios%E4%BA%8C%E6%AC%A1%E5%B0%81%E8%A3%85/" title="Axios二次封装"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2024-08-11</div><div class="title">Axios二次封装</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/img/fafafa.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">fafafa</div><div class="author-info__description">记录笔记日志</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">64</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">42</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">52</div></a></div><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xxxxx" target="_blank" title="Github"><i class="fab fa-github" style="color: #24292e;"></i></a><a class="social-icon" href="/fafafabaobei@163.com" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a><a class="social-icon" href="tencent://AddContact/?fromId=45&amp;fromSubId=1&amp;subcmd=all&amp;uin=728831102&amp;website=www.oicqzone.com" target="_blank" title="QQ"><i class="fab fa-qq"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#React"><span class="toc-number">1.</span> <span class="toc-text">React</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%9F%BA%E7%A1%80"><span class="toc-number">1.1.</span> <span class="toc-text">项目基础</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E5%85%A5%E5%8F%A3%E6%96%87%E4%BB%B6"><span class="toc-number">1.2.</span> <span class="toc-text">项目入口文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#App%E6%A0%B9%E7%BB%84%E4%BB%B6"><span class="toc-number">1.3.</span> <span class="toc-text">App根组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jsx-%E6%8F%92%E5%80%BC%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">jsx 插值表达式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fragment"><span class="toc-number">1.5.</span> <span class="toc-text">Fragment</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React%E7%BB%84%E4%BB%B6%E5%92%8Cjsx"><span class="toc-number">1.6.</span> <span class="toc-text">React组件和jsx</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#react%E4%BA%8B%E4%BB%B6%E7%BB%91%E5%AE%9A"><span class="toc-number">1.7.</span> <span class="toc-text">react事件绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#react-%E7%BB%84%E4%BB%B6%E4%B8%AD%E7%9A%84%E5%93%8D%E5%BA%94%E5%BC%8F%E6%95%B0%E6%8D%AE"><span class="toc-number">1.8.</span> <span class="toc-text">react 组件中的响应式数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%E5%92%8C%E5%88%97%E8%A1%A8%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.9.</span> <span class="toc-text">React 条件渲染和列表循环</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9D%A1%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.9.1.</span> <span class="toc-text">条件循环</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%97%E8%A1%A8%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.9.2.</span> <span class="toc-text">列表循环</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#react%E7%9A%84%E6%80%9D%E6%83%B3"><span class="toc-number">1.9.3.</span> <span class="toc-text">react的思想</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E5%8D%95%E7%BB%91%E5%AE%9A"><span class="toc-number">1.10.</span> <span class="toc-text">表单绑定</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Prop%E5%92%8C%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1%E3%80%81%E6%8F%92%E6%A7%BD"><span class="toc-number">1.11.</span> <span class="toc-text">Prop和组件通信、插槽</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React%E4%B8%AD%E7%9A%84%E6%A0%B7%E5%BC%8F%E6%93%8D%E4%BD%9C"><span class="toc-number">1.12.</span> <span class="toc-text">React中的样式操作</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="toc-number">1.13.</span> <span class="toc-text">React 生命周期</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ref%E5%92%8Ccontext"><span class="toc-number">1.14.</span> <span class="toc-text">ref和context</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-%E6%96%B0%E7%89%88%E6%9C%AC%E5%87%BD%E6%95%B0%E7%BB%84%E4%BB%B6%E8%B7%9Fhook"><span class="toc-number">1.15.</span> <span class="toc-text">React 新版本函数组件跟hook</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%AB%98%E9%98%B6%E7%BB%84%E4%BB%B6"><span class="toc-number">1.16.</span> <span class="toc-text">高阶组件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-router"><span class="toc-number">1.17.</span> <span class="toc-text">React - router</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86"><span class="toc-number">1.18.</span> <span class="toc-text">React 状态管理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React%E4%B8%AD%E7%9A%84%E8%B7%AF%E7%94%B1%E6%8E%A7%E5%88%B6"><span class="toc-number">1.19.</span> <span class="toc-text">React中的路由控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E5%90%88%E5%AE%9E%E9%99%85%E9%A1%B9%E7%9B%AE-react%E5%9D%91"><span class="toc-number">1.20.</span> <span class="toc-text">结合实际项目 react坑</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#React-TS"><span class="toc-number">1.21.</span> <span class="toc-text">React + TS</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E4%BC%A0%E5%80%BC-porps"><span class="toc-number">1.21.1.</span> <span class="toc-text">组件传值 porps</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B-TodoList"><span class="toc-number">1.21.2.</span> <span class="toc-text">案例 TodoList</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/06/08/Jquery/" title="Jquery"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Jquery"/></a><div class="content"><a class="title" href="/2025/06/08/Jquery/" title="Jquery">Jquery</a><time datetime="2025-06-08T14:48:43.000Z" title="发表于 2025-06-08 22:48:43">2025-06-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/08/vite/" title="Vite"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vite"/></a><div class="content"><a class="title" href="/2025/06/08/vite/" title="Vite">Vite</a><time datetime="2025-06-08T14:45:53.000Z" title="发表于 2025-06-08 22:45:53">2025-06-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/08/webpack/" title="Webpack"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Webpack"/></a><div class="content"><a class="title" href="/2025/06/08/webpack/" title="Webpack">Webpack</a><time datetime="2025-06-08T14:45:46.000Z" title="发表于 2025-06-08 22:45:46">2025-06-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/08/WebApi/" title="WebApi"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="WebApi"/></a><div class="content"><a class="title" href="/2025/06/08/WebApi/" title="WebApi">WebApi</a><time datetime="2025-06-08T14:45:34.000Z" title="发表于 2025-06-08 22:45:34">2025-06-08</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2025/06/08/ES%E6%96%B0%E7%89%B9%E6%80%A7/" title="ES新特性"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ES新特性"/></a><div class="content"><a class="title" href="/2025/06/08/ES%E6%96%B0%E7%89%B9%E6%80%A7/" title="ES新特性">ES新特性</a><time datetime="2025-06-08T14:20:01.000Z" title="发表于 2025-06-08 22:20:01">2025-06-08</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2022 - 2025 By fafafa</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.14.0-b3"></script><script src="/js/main.js?v=4.14.0-b3"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.35/dist/fancybox/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@5.2.0/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@19.0.5/dist/lazyload.iife.min.js"></script><script>(() => {
  const panguFn = () => {
    if (typeof pangu === 'object') pangu.autoSpacingPage()
    else {
      btf.getScript('https://cdn.jsdelivr.net/npm/pangu@4.0.7/dist/browser/pangu.min.js')
        .then(() => {
          pangu.autoSpacingPage()
        })
    }
  }

  const panguInit = () => {
    if (false){
      GLOBAL_CONFIG_SITE.isPost && panguFn()
    } else {
      panguFn()
    }
  }

  btf.addGlobalFn('pjaxComplete', panguInit, 'pangu')
  document.addEventListener('DOMContentLoaded', panguInit)
})()</script><div class="js-pjax"><script>(() => {
  const runMermaid = (ele) => {
    window.loadMermaid = true
    const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

    Array.from(ele).forEach((item, index) => {
      const mermaidSrc = item.firstElementChild
      const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
      const mermaidID = 'mermaid-' + index
      const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent

      const renderFn = mermaid.render(mermaidID, mermaidDefinition)

      const renderV10 = () => {
        renderFn.then(({svg}) => {
          mermaidSrc.insertAdjacentHTML('afterend', svg)
        })
      }

      const renderV9 = svg => {
        mermaidSrc.insertAdjacentHTML('afterend', svg)
      }

      typeof renderFn === 'string' ? renderV9(renderFn) : renderV10()
    })
  }

  const codeToMermaid = () => {
    const codeMermaidEle = document.querySelectorAll('pre > code.mermaid')
    if (codeMermaidEle.length === 0) return
    
    codeMermaidEle.forEach(ele => {
      const newEle = document.createElement('div')
      newEle.className = 'mermaid-wrap'
      newEle.innerHTML = `<pre class="mermaid-src" hidden>${ele.textContent}</pre>`
      ele.parentNode.replaceWith(newEle)
    })
  }

  const loadMermaid = () => {
    if (false) codeToMermaid()
    const $mermaid = document.querySelectorAll('#article-container .mermaid-wrap')
    if ($mermaid.length === 0) return

    const runMermaidFn = () => runMermaid($mermaid)
    btf.addGlobalFn('themeChange', runMermaidFn, 'mermaid')
    window.loadMermaid ? runMermaidFn() : btf.getScript('https://cdn.jsdelivr.net/npm/mermaid@10.9.0/dist/mermaid.min.js').then(runMermaidFn)
  }
  
  btf.addGlobalFn('encrypt', loadMermaid, 'mermaid')
  window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
})()</script></div><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
POWERMODE.mobile = false;
document.body.addEventListener('input', POWERMODE);
</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js?v=4.14.0-b3"></script></div></div></body></html>